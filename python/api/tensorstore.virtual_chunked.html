

<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../_static/logo.svg">
    
    
      
        <title>tensorstore.virtual_chunked - TensorStore</title>
      
    
    
      
        
        
      
      

    
    
    
      
        
        
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
        <link rel="stylesheet" type="text/css" href="../../_static/sphinx_immaterial_theme.b83f2e057cd610c26.min.css?v=71bc7cdb" />
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="green" data-md-color-accent="light-blue">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#parameters" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../index.html" title="TensorStore" class="md-header__button md-logo" aria-label="TensorStore" data-md-component="logo">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 132.0 132.0"><line stroke="currentColor" stroke-width="1.5" x1="1.25" y1="2.0" x2="130.8" y2="2.0"/><line stroke="currentColor" stroke-width="1.5" x1="1.25" y1="16.2" x2="130.8" y2="16.2"/><line stroke="currentColor" stroke-width="1.5" x1="1.25" y1="30.4" x2="130.8" y2="30.4"/><line stroke="currentColor" stroke-width="1.5" x1="1.25" y1="44.7" x2="130.8" y2="44.7"/><line stroke="currentColor" stroke-width="1.5" x1="1.25" y1="58.9" x2="130.8" y2="58.9"/><line stroke="currentColor" stroke-width="1.5" x1="1.25" y1="73.1" x2="130.8" y2="73.1"/><line stroke="currentColor" stroke-width="1.5" x1="1.25" y1="87.3" x2="130.8" y2="87.3"/><line stroke="currentColor" stroke-width="1.5" x1="1.25" y1="101.6" x2="130.8" y2="101.6"/><line stroke="currentColor" stroke-width="1.5" x1="1.25" y1="115.8" x2="130.8" y2="115.8"/><line stroke="currentColor" stroke-width="1.5" x1="1.25" y1="130.0" x2="130.8" y2="130.0"/><line stroke="currentColor" stroke-width="1.5" y1="2" x1="2.0" y2="130.0" x2="2.0"/><line stroke="currentColor" stroke-width="1.5" y1="2" x1="16.2" y2="130.0" x2="16.2"/><line stroke="currentColor" stroke-width="1.5" y1="2" x1="30.4" y2="130.0" x2="30.4"/><line stroke="currentColor" stroke-width="1.5" y1="2" x1="44.7" y2="130.0" x2="44.7"/><line stroke="currentColor" stroke-width="1.5" y1="2" x1="58.9" y2="130.0" x2="58.9"/><line stroke="currentColor" stroke-width="1.5" y1="2" x1="73.1" y2="130.0" x2="73.1"/><line stroke="currentColor" stroke-width="1.5" y1="2" x1="87.3" y2="130.0" x2="87.3"/><line stroke="currentColor" stroke-width="1.5" y1="2" x1="101.6" y2="130.0" x2="101.6"/><line stroke="currentColor" stroke-width="1.5" y1="2" x1="115.8" y2="130.0" x2="115.8"/><line stroke="currentColor" stroke-width="1.5" y1="2" x1="130.0" y2="130.0" x2="130.0"/><rect fill="currentColor" x="3.5" y="3.5" width="11.2" height="11.2"/><rect fill="currentColor" x="17.7" y="3.5" width="11.2" height="11.2"/><rect fill="currentColor" x="31.9" y="3.5" width="11.2" height="11.2"/><rect fill="currentColor" x="46.2" y="3.5" width="11.2" height="11.2"/><rect fill="currentColor" x="60.4" y="3.5" width="11.2" height="11.2"/><rect fill="currentColor" x="31.9" y="17.7" width="11.2" height="11.2"/><rect fill="currentColor" x="31.9" y="31.9" width="11.2" height="11.2"/><rect fill="currentColor" x="74.6" y="31.9" width="11.2" height="11.2"/><rect fill="currentColor" x="88.8" y="31.9" width="11.2" height="11.2"/><rect fill="currentColor" x="103.1" y="31.9" width="11.2" height="11.2"/><rect fill="currentColor" x="31.9" y="46.2" width="11.2" height="11.2"/><rect fill="currentColor" x="60.4" y="46.2" width="11.2" height="11.2"/><rect fill="currentColor" x="117.3" y="46.2" width="11.2" height="11.2"/><rect fill="currentColor" x="31.9" y="60.4" width="11.2" height="11.2"/><rect fill="currentColor" x="74.6" y="60.4" width="11.2" height="11.2"/><rect fill="currentColor" x="31.9" y="74.6" width="11.2" height="11.2"/><rect fill="currentColor" x="88.8" y="74.6" width="11.2" height="11.2"/><rect fill="currentColor" x="31.9" y="88.8" width="11.2" height="11.2"/><rect fill="currentColor" x="103.1" y="88.8" width="11.2" height="11.2"/><rect fill="currentColor" x="60.4" y="103.1" width="11.2" height="11.2"/><rect fill="currentColor" x="117.3" y="103.1" width="11.2" height="11.2"/><rect fill="currentColor" x="74.6" y="117.3" width="11.2" height="11.2"/><rect fill="currentColor" x="88.8" y="117.3" width="11.2" height="11.2"/><rect fill="currentColor" x="103.1" y="117.3" width="11.2" height="11.2"/></svg>
    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            TensorStore
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              tensorstore.virtual_chunked
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="green" data-md-color-accent="light-blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1Z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="light-blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/google/tensorstore/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    tensorstore
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../index.html" title="TensorStore" class="md-nav__button md-logo" aria-label="TensorStore" data-md-component="logo">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 132.0 132.0"><line stroke="currentColor" stroke-width="1.5" x1="1.25" y1="2.0" x2="130.8" y2="2.0"/><line stroke="currentColor" stroke-width="1.5" x1="1.25" y1="16.2" x2="130.8" y2="16.2"/><line stroke="currentColor" stroke-width="1.5" x1="1.25" y1="30.4" x2="130.8" y2="30.4"/><line stroke="currentColor" stroke-width="1.5" x1="1.25" y1="44.7" x2="130.8" y2="44.7"/><line stroke="currentColor" stroke-width="1.5" x1="1.25" y1="58.9" x2="130.8" y2="58.9"/><line stroke="currentColor" stroke-width="1.5" x1="1.25" y1="73.1" x2="130.8" y2="73.1"/><line stroke="currentColor" stroke-width="1.5" x1="1.25" y1="87.3" x2="130.8" y2="87.3"/><line stroke="currentColor" stroke-width="1.5" x1="1.25" y1="101.6" x2="130.8" y2="101.6"/><line stroke="currentColor" stroke-width="1.5" x1="1.25" y1="115.8" x2="130.8" y2="115.8"/><line stroke="currentColor" stroke-width="1.5" x1="1.25" y1="130.0" x2="130.8" y2="130.0"/><line stroke="currentColor" stroke-width="1.5" y1="2" x1="2.0" y2="130.0" x2="2.0"/><line stroke="currentColor" stroke-width="1.5" y1="2" x1="16.2" y2="130.0" x2="16.2"/><line stroke="currentColor" stroke-width="1.5" y1="2" x1="30.4" y2="130.0" x2="30.4"/><line stroke="currentColor" stroke-width="1.5" y1="2" x1="44.7" y2="130.0" x2="44.7"/><line stroke="currentColor" stroke-width="1.5" y1="2" x1="58.9" y2="130.0" x2="58.9"/><line stroke="currentColor" stroke-width="1.5" y1="2" x1="73.1" y2="130.0" x2="73.1"/><line stroke="currentColor" stroke-width="1.5" y1="2" x1="87.3" y2="130.0" x2="87.3"/><line stroke="currentColor" stroke-width="1.5" y1="2" x1="101.6" y2="130.0" x2="101.6"/><line stroke="currentColor" stroke-width="1.5" y1="2" x1="115.8" y2="130.0" x2="115.8"/><line stroke="currentColor" stroke-width="1.5" y1="2" x1="130.0" y2="130.0" x2="130.0"/><rect fill="currentColor" x="3.5" y="3.5" width="11.2" height="11.2"/><rect fill="currentColor" x="17.7" y="3.5" width="11.2" height="11.2"/><rect fill="currentColor" x="31.9" y="3.5" width="11.2" height="11.2"/><rect fill="currentColor" x="46.2" y="3.5" width="11.2" height="11.2"/><rect fill="currentColor" x="60.4" y="3.5" width="11.2" height="11.2"/><rect fill="currentColor" x="31.9" y="17.7" width="11.2" height="11.2"/><rect fill="currentColor" x="31.9" y="31.9" width="11.2" height="11.2"/><rect fill="currentColor" x="74.6" y="31.9" width="11.2" height="11.2"/><rect fill="currentColor" x="88.8" y="31.9" width="11.2" height="11.2"/><rect fill="currentColor" x="103.1" y="31.9" width="11.2" height="11.2"/><rect fill="currentColor" x="31.9" y="46.2" width="11.2" height="11.2"/><rect fill="currentColor" x="60.4" y="46.2" width="11.2" height="11.2"/><rect fill="currentColor" x="117.3" y="46.2" width="11.2" height="11.2"/><rect fill="currentColor" x="31.9" y="60.4" width="11.2" height="11.2"/><rect fill="currentColor" x="74.6" y="60.4" width="11.2" height="11.2"/><rect fill="currentColor" x="31.9" y="74.6" width="11.2" height="11.2"/><rect fill="currentColor" x="88.8" y="74.6" width="11.2" height="11.2"/><rect fill="currentColor" x="31.9" y="88.8" width="11.2" height="11.2"/><rect fill="currentColor" x="103.1" y="88.8" width="11.2" height="11.2"/><rect fill="currentColor" x="60.4" y="103.1" width="11.2" height="11.2"/><rect fill="currentColor" x="117.3" y="103.1" width="11.2" height="11.2"/><rect fill="currentColor" x="74.6" y="117.3" width="11.2" height="11.2"/><rect fill="currentColor" x="88.8" y="117.3" width="11.2" height="11.2"/><rect fill="currentColor" x="103.1" y="117.3" width="11.2" height="11.2"/></svg>
    </a>
    TensorStore
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/google/tensorstore/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    tensorstore
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
    
  
  
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" checked>
      
      
      
        <label class="md-nav__link" for="__nav_1">
          <span class="md-ellipsis">Python API</span>
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Python API" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          <span class="md-ellipsis">Python API</span>
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial.html" class="md-nav__link">
        <span class="md-ellipsis">Tutorial</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../indexing.html" class="md-nav__link">
        <span class="md-ellipsis">Indexing</span>
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_3" type="checkbox" id="__nav_1_3" checked>
      
      
      
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="index.html"><span class="md-ellipsis">API reference</span></a>
          
            <label for="__nav_1_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="API reference" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_3">
          <span class="md-nav__icon md-icon"></span>
          <span class="md-ellipsis">API reference</span>
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="index.html#core" class="md-nav__link">
        <span class="md-ellipsis">Core</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="index.html#indexing" class="md-nav__link">
        <span class="md-ellipsis">Indexing</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="index.html#spec" class="md-nav__link">
        <span class="md-ellipsis">Spec</span>
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_3_4" type="checkbox" id="__nav_1_3_4" checked>
      
      
      
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="index.html#views"><span class="md-ellipsis">Views</span></a>
          
            <label for="__nav_1_3_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Views" data-md-level="3">
        <label class="md-nav__title" for="__nav_1_3_4">
          <span class="md-nav__icon md-icon"></span>
          <span class="md-ellipsis">Views</span>
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="tensorstore.cast-store.html" class="md-nav__link">
        <span aria-label="Python function" class="objinfo-icon objinfo-icon__procedure" title="Python function">F</span><span title="tensorstore.cast(store) (Python function) — Returns a read/write view with the data type converted." class="md-ellipsis">cast<wbr>(store)</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="tensorstore.cast-spec.html" class="md-nav__link">
        <span aria-label="Python function" class="objinfo-icon objinfo-icon__procedure" title="Python function">F</span><span title="tensorstore.cast(spec) (Python function) — Returns a view with the data type converted." class="md-ellipsis">cast<wbr>(spec)</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="tensorstore.array.html" class="md-nav__link">
        <span aria-label="Python function" class="objinfo-icon objinfo-icon__procedure" title="Python function">F</span><span title="tensorstore.array (Python function) — Returns a TensorStore that reads/writes from an in-memory array." class="md-ellipsis">array</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="tensorstore.overlay.html" class="md-nav__link">
        <span aria-label="Python function" class="objinfo-icon objinfo-icon__procedure" title="Python function">F</span><span title="tensorstore.overlay (Python function) — Virtually overlays a sequence of TensorStore layers within a common domain." class="md-ellipsis">overlay</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="tensorstore.stack.html" class="md-nav__link">
        <span aria-label="Python function" class="objinfo-icon objinfo-icon__procedure" title="Python function">F</span><span title="tensorstore.stack (Python function) — Virtually stacks a sequence of TensorStore layers along a new dimension." class="md-ellipsis">stack</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="tensorstore.concat.html" class="md-nav__link">
        <span aria-label="Python function" class="objinfo-icon objinfo-icon__procedure" title="Python function">F</span><span title="tensorstore.concat (Python function) — Virtually concatenates a sequence of TensorStore layers along an existing dimension." class="md-ellipsis">concat</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="tensorstore.downsample-store.html" class="md-nav__link">
        <span aria-label="Python function" class="objinfo-icon objinfo-icon__procedure" title="Python function">F</span><span title="tensorstore.downsample(store) (Python function) — Returns a virtual downsampled view of a TensorStore." class="md-ellipsis">downsample<wbr>(store)</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="tensorstore.downsample-spec.html" class="md-nav__link">
        <span aria-label="Python function" class="objinfo-icon objinfo-icon__procedure" title="Python function">F</span><span title="tensorstore.downsample(spec) (Python function) — Returns a virtual downsampled view view of a Spec." class="md-ellipsis">downsample<wbr>(spec)</span>
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_3_4_9" type="checkbox" id="__nav_1_3_4_9" checked>
      
      
      
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="index.html#virtual-views"><span class="md-ellipsis">Virtual views</span></a>
          
            <label for="__nav_1_3_4_9">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Virtual views" data-md-level="4">
        <label class="md-nav__title" for="__nav_1_3_4_9">
          <span class="md-nav__icon md-icon"></span>
          <span class="md-ellipsis">Virtual views</span>
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="tensorstore.VirtualChunkedReadParameters.html" class="md-nav__link">
        <span aria-label="Python class" class="objinfo-icon objinfo-icon__data" title="Python class">C</span><span title="tensorstore.VirtualChunkedReadParameters (Python class) — Options passed to read callbacks used with virtual_chunked." class="md-ellipsis">Virtual<wbr>Chunked<wbr>Read<wbr>Parameters</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="tensorstore.VirtualChunkedWriteParameters.html" class="md-nav__link">
        <span aria-label="Python class" class="objinfo-icon objinfo-icon__data" title="Python class">C</span><span title="tensorstore.VirtualChunkedWriteParameters (Python class) — Options passed to write callbacks used with virtual_chunked." class="md-ellipsis">Virtual<wbr>Chunked<wbr>Write<wbr>Parameters</span>
      </a>
    </li>
  

            
          
            
              
  
  
    
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          <span aria-label="Python function" class="objinfo-icon objinfo-icon__procedure" title="Python function">F</span><span title="tensorstore.virtual_chunked (Python function) — Creates a TensorStore where the content is read/written chunk-wise by an arbitrary function." class="md-ellipsis">virtual_<wbr>chunked</span>
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="#" class="md-nav__link md-nav__link--active">
        <span aria-label="Python function" class="objinfo-icon objinfo-icon__procedure" title="Python function">F</span><span title="tensorstore.virtual_chunked (Python function) — Creates a TensorStore where the content is read/written chunk-wise by an arbitrary function." class="md-ellipsis">virtual_<wbr>chunked</span>
      </a>
      
        

  

<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      <span aria-label="Python function" class="objinfo-icon objinfo-icon__procedure" title="Python function">F</span><span title="tensorstore.virtual_chunked (Python function) — Creates a TensorStore where the content is read/written chunk-wise by an arbitrary function." class="md-ellipsis">virtual_<wbr>chunked</span>
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#parameters" class="md-nav__link">
    <span class="md-ellipsis">Parameters</span>
  </a>
  
    <nav class="md-nav" aria-label="Parameters">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#p-read_function" class="md-nav__link">
    <span aria-label="Python parameter" class="objinfo-icon objinfo-icon__sub-data" title="Python parameter">p</span><span title="tensorstore.virtual_chunked.read_function (Python parameter) — Callback that handles chunk read requests." class="md-ellipsis">read_<wbr>function</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#p-write_function" class="md-nav__link">
    <span aria-label="Python parameter" class="objinfo-icon objinfo-icon__sub-data" title="Python parameter">p</span><span title="tensorstore.virtual_chunked.write_function (Python parameter) — Callback that handles chunk write requests." class="md-ellipsis">write_<wbr>function</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#p-loop" class="md-nav__link">
    <span aria-label="Python parameter" class="objinfo-icon objinfo-icon__sub-data" title="Python parameter">p</span><span title="tensorstore.virtual_chunked.loop (Python parameter) — Event loop on which to execute read_function and/or write_function if they are async functions." class="md-ellipsis">loop</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#p-rank" class="md-nav__link">
    <span aria-label="Python parameter" class="objinfo-icon objinfo-icon__sub-data" title="Python parameter">p</span><span title="tensorstore.virtual_chunked.rank (Python parameter) — Constrains the rank of the TensorStore." class="md-ellipsis">rank</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#p-dtype" class="md-nav__link">
    <span aria-label="Python parameter" class="objinfo-icon objinfo-icon__sub-data" title="Python parameter">p</span><span title="tensorstore.virtual_chunked.dtype (Python parameter) — Constrains the data type of the TensorStore." class="md-ellipsis">dtype</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#p-domain" class="md-nav__link">
    <span aria-label="Python parameter" class="objinfo-icon objinfo-icon__sub-data" title="Python parameter">p</span><span title="tensorstore.virtual_chunked.domain (Python parameter) — Constrains the domain of the TensorStore." class="md-ellipsis">domain</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#p-shape" class="md-nav__link">
    <span aria-label="Python parameter" class="objinfo-icon objinfo-icon__sub-data" title="Python parameter">p</span><span title="tensorstore.virtual_chunked.shape (Python parameter) — Constrains the shape and origin of the TensorStore." class="md-ellipsis">shape</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#p-chunk_layout" class="md-nav__link">
    <span aria-label="Python parameter" class="objinfo-icon objinfo-icon__sub-data" title="Python parameter">p</span><span title="tensorstore.virtual_chunked.chunk_layout (Python parameter) — Constrains the chunk layout." class="md-ellipsis">chunk_<wbr>layout</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#p-dimension_units" class="md-nav__link">
    <span aria-label="Python parameter" class="objinfo-icon objinfo-icon__sub-data" title="Python parameter">p</span><span title="tensorstore.virtual_chunked.dimension_units (Python parameter) — Specifies the physical units of each dimension of the domain." class="md-ellipsis">dimension_<wbr>units</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#p-schema" class="md-nav__link">
    <span aria-label="Python parameter" class="objinfo-icon objinfo-icon__sub-data" title="Python parameter">p</span><span title="tensorstore.virtual_chunked.schema (Python parameter) — Additional schema constraints to merge with existing constraints." class="md-ellipsis">schema</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#p-context" class="md-nav__link">
    <span aria-label="Python parameter" class="objinfo-icon objinfo-icon__sub-data" title="Python parameter">p</span><span title="tensorstore.virtual_chunked.context (Python parameter) — Shared resource context." class="md-ellipsis">context</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#p-transaction" class="md-nav__link">
    <span aria-label="Python parameter" class="objinfo-icon objinfo-icon__sub-data" title="Python parameter">p</span><span title="tensorstore.virtual_chunked.transaction (Python parameter) — Transaction to use for opening/creating, and for subsequent operations." class="md-ellipsis">transaction</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#caching" class="md-nav__link">
    <span class="md-ellipsis">Caching</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pickle-support" class="md-nav__link">
    <span class="md-ellipsis">Pickle support</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#transaction-support" class="md-nav__link">
    <span class="md-ellipsis">Transaction support</span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  
  

            
          
        </ul>
      </nav>
    </li>
  
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="index.html#data-types" class="md-nav__link">
        <span class="md-ellipsis">Data types</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="index.html#asynchronous-support" class="md-nav__link">
        <span class="md-ellipsis">Asynchronous support</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="index.html#ocdbt" class="md-nav__link">
        <span class="md-ellipsis">OCDBT</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="index.html#experimental" class="md-nav__link">
        <span class="md-ellipsis">Experimental</span>
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  
  

            
          
        </ul>
      </nav>
    </li>
  
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      
      
        <label class="md-nav__link" for="__nav_2">
          <span class="md-ellipsis">C++ API</span>
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="C++ API" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          <span class="md-ellipsis">C++ API</span>
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp/api/index.html" class="md-nav__link">
        <span class="md-ellipsis">API reference</span>
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
      
        <label class="md-nav__link" for="__nav_3">
          <span class="md-ellipsis">Setup</span>
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Setup" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          <span class="md-ellipsis">Setup</span>
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation.html" class="md-nav__link">
        <span class="md-ellipsis">Building and Installing</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../../environment.html" class="md-nav__link">
        <span class="md-ellipsis">Environment variables</span>
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      
      
        <label class="md-nav__link" for="__nav_4">
          <span class="md-ellipsis">JSON</span>
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="JSON" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          <span class="md-ellipsis">JSON</span>
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../../spec.html" class="md-nav__link">
        <span class="md-ellipsis">JSON Spec</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../../index_space.html" class="md-nav__link">
        <span class="md-ellipsis">Index space</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../../schema.html" class="md-nav__link">
        <span class="md-ellipsis">Schema</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../../context.html" class="md-nav__link">
        <span class="md-ellipsis">Context framework</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../../driver/index.html" class="md-nav__link">
        <span class="md-ellipsis">Drivers</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kvstore/index.html" class="md-nav__link">
        <span class="md-ellipsis">Key-<wbr>Value Storage Layer</span>
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  

<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      <span aria-label="Python function" class="objinfo-icon objinfo-icon__procedure" title="Python function">F</span><span title="tensorstore.virtual_chunked (Python function) — Creates a TensorStore where the content is read/written chunk-wise by an arbitrary function." class="md-ellipsis">virtual_<wbr>chunked</span>
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#parameters" class="md-nav__link">
    <span class="md-ellipsis">Parameters</span>
  </a>
  
    <nav class="md-nav" aria-label="Parameters">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#p-read_function" class="md-nav__link">
    <span aria-label="Python parameter" class="objinfo-icon objinfo-icon__sub-data" title="Python parameter">p</span><span title="tensorstore.virtual_chunked.read_function (Python parameter) — Callback that handles chunk read requests." class="md-ellipsis">read_<wbr>function</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#p-write_function" class="md-nav__link">
    <span aria-label="Python parameter" class="objinfo-icon objinfo-icon__sub-data" title="Python parameter">p</span><span title="tensorstore.virtual_chunked.write_function (Python parameter) — Callback that handles chunk write requests." class="md-ellipsis">write_<wbr>function</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#p-loop" class="md-nav__link">
    <span aria-label="Python parameter" class="objinfo-icon objinfo-icon__sub-data" title="Python parameter">p</span><span title="tensorstore.virtual_chunked.loop (Python parameter) — Event loop on which to execute read_function and/or write_function if they are async functions." class="md-ellipsis">loop</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#p-rank" class="md-nav__link">
    <span aria-label="Python parameter" class="objinfo-icon objinfo-icon__sub-data" title="Python parameter">p</span><span title="tensorstore.virtual_chunked.rank (Python parameter) — Constrains the rank of the TensorStore." class="md-ellipsis">rank</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#p-dtype" class="md-nav__link">
    <span aria-label="Python parameter" class="objinfo-icon objinfo-icon__sub-data" title="Python parameter">p</span><span title="tensorstore.virtual_chunked.dtype (Python parameter) — Constrains the data type of the TensorStore." class="md-ellipsis">dtype</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#p-domain" class="md-nav__link">
    <span aria-label="Python parameter" class="objinfo-icon objinfo-icon__sub-data" title="Python parameter">p</span><span title="tensorstore.virtual_chunked.domain (Python parameter) — Constrains the domain of the TensorStore." class="md-ellipsis">domain</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#p-shape" class="md-nav__link">
    <span aria-label="Python parameter" class="objinfo-icon objinfo-icon__sub-data" title="Python parameter">p</span><span title="tensorstore.virtual_chunked.shape (Python parameter) — Constrains the shape and origin of the TensorStore." class="md-ellipsis">shape</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#p-chunk_layout" class="md-nav__link">
    <span aria-label="Python parameter" class="objinfo-icon objinfo-icon__sub-data" title="Python parameter">p</span><span title="tensorstore.virtual_chunked.chunk_layout (Python parameter) — Constrains the chunk layout." class="md-ellipsis">chunk_<wbr>layout</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#p-dimension_units" class="md-nav__link">
    <span aria-label="Python parameter" class="objinfo-icon objinfo-icon__sub-data" title="Python parameter">p</span><span title="tensorstore.virtual_chunked.dimension_units (Python parameter) — Specifies the physical units of each dimension of the domain." class="md-ellipsis">dimension_<wbr>units</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#p-schema" class="md-nav__link">
    <span aria-label="Python parameter" class="objinfo-icon objinfo-icon__sub-data" title="Python parameter">p</span><span title="tensorstore.virtual_chunked.schema (Python parameter) — Additional schema constraints to merge with existing constraints." class="md-ellipsis">schema</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#p-context" class="md-nav__link">
    <span aria-label="Python parameter" class="objinfo-icon objinfo-icon__sub-data" title="Python parameter">p</span><span title="tensorstore.virtual_chunked.context (Python parameter) — Shared resource context." class="md-ellipsis">context</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#p-transaction" class="md-nav__link">
    <span aria-label="Python parameter" class="objinfo-icon objinfo-icon__sub-data" title="Python parameter">p</span><span title="tensorstore.virtual_chunked.transaction (Python parameter) — Transaction to use for opening/creating, and for subsequent operations." class="md-ellipsis">transaction</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#caching" class="md-nav__link">
    <span class="md-ellipsis">Caching</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pickle-support" class="md-nav__link">
    <span class="md-ellipsis">Pickle support</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#transaction-support" class="md-nav__link">
    <span class="md-ellipsis">Transaction support</span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset" role="main">
                  


<dl class="py function objdesc">
<dt class="sig sig-object highlight sig-wrap py">
<span class="sig-prename descclassname"><span class="pre">tensorstore.</span></span><span class="sig-name descname"><span class="pre">virtual_chunked</span></span><span class="sig-paren">(</span><span class="sig-param-decl"><em class="sig-param"><a class="n reference internal" href="#p-read_function" title="tensorstore.virtual_chunked.read_function (Python parameter) — Callback that handles chunk read requests."><span class="n"><span class="pre">read_function</span></span></a><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="desctype"><a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable" title="(in Python v3.11)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="tensorstore.IndexDomain.html" title="tensorstore.IndexDomain (Python class) — Domain (including bounds and optional dimension labels) of an N-dimensional index space."><span class="pre">IndexDomain</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://numpy.org/doc/stable/reference/typing.html#numpy.typing.ArrayLike" title="(in NumPy v1.24)"><span class="pre">ArrayLike</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="tensorstore.VirtualChunkedReadParameters.html" title="tensorstore.VirtualChunkedReadParameters (Python class) — Options passed to read callbacks used with virtual_chunked."><span class="pre">VirtualChunkedReadParameters</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="tensorstore.FutureLike.html" title="tensorstore.FutureLike (Python class) — Abstract base class for types representing an asynchronous result."><span class="pre">FutureLike</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="tensorstore.KvStore.TimestampedStorageGeneration.html" title="tensorstore.KvStore.TimestampedStorageGeneration (Python class) — Specifies a storage generation identifier and a timestamp."><span class="pre">KvStore.TimestampedStorageGeneration</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><code class="code python default_value docutils literal highlight highlight-python"><span class="kc">None</span></code></em>, </span><span class="sig-param-decl"><em class="sig-param"><a class="n reference internal" href="#p-write_function" title="tensorstore.virtual_chunked.write_function (Python parameter) — Callback that handles chunk write requests."><span class="n"><span class="pre">write_function</span></span></a><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="desctype"><a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable" title="(in Python v3.11)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="tensorstore.IndexDomain.html" title="tensorstore.IndexDomain (Python class) — Domain (including bounds and optional dimension labels) of an N-dimensional index space."><span class="pre">IndexDomain</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://numpy.org/doc/stable/reference/typing.html#numpy.typing.ArrayLike" title="(in NumPy v1.24)"><span class="pre">ArrayLike</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="tensorstore.VirtualChunkedWriteParameters.html" title="tensorstore.VirtualChunkedWriteParameters (Python class) — Options passed to write callbacks used with virtual_chunked."><span class="pre">VirtualChunkedWriteParameters</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="tensorstore.FutureLike.html" title="tensorstore.FutureLike (Python class) — Abstract base class for types representing an asynchronous result."><span class="pre">FutureLike</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="tensorstore.KvStore.TimestampedStorageGeneration.html" title="tensorstore.KvStore.TimestampedStorageGeneration (Python class) — Specifies a storage generation identifier and a timestamp."><span class="pre">KvStore.TimestampedStorageGeneration</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><code class="code python default_value docutils literal highlight highlight-python"><span class="kc">None</span></code></em>, </span><span class="sig-param-decl"><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, </span><span class="sig-param-decl"><em class="sig-param"><a class="n reference internal" href="#p-loop" title="tensorstore.virtual_chunked.loop (Python parameter) — Event loop on which to execute read_function and/or write_function if they are async functions."><span class="n"><span class="pre">loop</span></span></a><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="desctype"><a class="reference external" href="https://docs.python.org/3/library/asyncio-eventloop.html#asyncio.AbstractEventLoop" title="(in Python v3.11)"><span class="pre">asyncio.AbstractEventLoop</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><code class="code python default_value docutils literal highlight highlight-python"><span class="kc">None</span></code></em>, </span><span class="sig-param-decl"><em class="sig-param"><a class="n reference internal" href="#p-rank" title="tensorstore.virtual_chunked.rank (Python parameter) — Constrains the rank of the TensorStore."><span class="n"><span class="pre">rank</span></span></a><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="desctype"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><code class="code python default_value docutils literal highlight highlight-python"><span class="kc">None</span></code></em>, </span><span class="sig-param-decl"><em class="sig-param"><a class="n reference internal" href="#p-dtype" title="tensorstore.virtual_chunked.dtype (Python parameter) — Constrains the data type of the TensorStore."><span class="n"><span class="pre">dtype</span></span></a><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="desctype"><a class="reference internal" href="tensorstore.dtype.html" title="tensorstore.dtype (Python class) — TensorStore data type representation."><span class="pre">dtype</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><code class="code python default_value docutils literal highlight highlight-python"><span class="kc">None</span></code></em>, </span><span class="sig-param-decl"><em class="sig-param"><a class="n reference internal" href="#p-domain" title="tensorstore.virtual_chunked.domain (Python parameter) — Constrains the domain of the TensorStore."><span class="n"><span class="pre">domain</span></span></a><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="desctype"><a class="reference internal" href="tensorstore.IndexDomain.html" title="tensorstore.IndexDomain (Python class) — Domain (including bounds and optional dimension labels) of an N-dimensional index space."><span class="pre">IndexDomain</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><code class="code python default_value docutils literal highlight highlight-python"><span class="kc">None</span></code></em>, </span><span class="sig-param-decl"><em class="sig-param"><a class="n reference internal" href="#p-shape" title="tensorstore.virtual_chunked.shape (Python parameter) — Constrains the shape and origin of the TensorStore."><span class="n"><span class="pre">shape</span></span></a><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="desctype"><a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence" title="(in Python v3.11)"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><code class="code python default_value docutils literal highlight highlight-python"><span class="kc">None</span></code></em>, </span><span class="sig-param-decl"><em class="sig-param"><a class="n reference internal" href="#p-chunk_layout" title="tensorstore.virtual_chunked.chunk_layout (Python parameter) — Constrains the chunk layout."><span class="n"><span class="pre">chunk_layout</span></span></a><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="desctype"><a class="reference internal" href="tensorstore.ChunkLayout.html" title="tensorstore.ChunkLayout (Python class) — Describes the storage layout of a tensorstore.TensorStore."><span class="pre">ChunkLayout</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><code class="code python default_value docutils literal highlight highlight-python"><span class="kc">None</span></code></em>, </span><span class="sig-param-decl"><em class="sig-param"><a class="n reference internal" href="#p-dimension_units" title="tensorstore.virtual_chunked.dimension_units (Python parameter) — Specifies the physical units of each dimension of the domain."><span class="n"><span class="pre">dimension_units</span></span></a><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="desctype"><a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence" title="(in Python v3.11)"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="tensorstore.Unit.html" title="tensorstore.Unit (Python class) — Specifies a physical quantity/unit."><span class="pre">Unit</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/numbers.html#numbers.Real" title="(in Python v3.11)"><span class="pre">Real</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.11)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/numbers.html#numbers.Real" title="(in Python v3.11)"><span class="pre">Real</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><code class="code python default_value docutils literal highlight highlight-python"><span class="kc">None</span></code></em>, </span><span class="sig-param-decl"><em class="sig-param"><a class="n reference internal" href="#p-schema" title="tensorstore.virtual_chunked.schema (Python parameter) — Additional schema constraints to merge with existing constraints."><span class="n"><span class="pre">schema</span></span></a><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="desctype"><a class="reference internal" href="tensorstore.Schema.html" title="tensorstore.Schema (Python class) — Driver-independent options for defining a TensorStore schema."><span class="pre">Schema</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><code class="code python default_value docutils literal highlight highlight-python"><span class="kc">None</span></code></em>, </span><span class="sig-param-decl"><em class="sig-param"><a class="n reference internal" href="#p-context" title="tensorstore.virtual_chunked.context (Python parameter) — Shared resource context."><span class="n"><span class="pre">context</span></span></a><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="desctype"><a class="reference internal" href="tensorstore.Context.html" title="tensorstore.Context (Python class) — Manages shared TensorStore context resources, such as caches and credentials."><span class="pre">Context</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><code class="code python default_value docutils literal highlight highlight-python"><span class="kc">None</span></code></em>, </span><span class="sig-param-decl"><em class="sig-param"><a class="n reference internal" href="#p-transaction" title="tensorstore.virtual_chunked.transaction (Python parameter) — Transaction to use for opening/creating, and for subsequent operations."><span class="n"><span class="pre">transaction</span></span></a><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="desctype"><a class="reference internal" href="tensorstore.Transaction.html" title="tensorstore.Transaction (Python class) — Transactions are used to stage a group of modifications (e.g. writes to tensorstore.TensorStore objects) in memory, and then either commit the group all at once or abort it."><span class="pre">Transaction</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><code class="code python default_value docutils literal highlight highlight-python"><span class="kc">None</span></code></em></span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="desctype"><a class="reference internal" href="tensorstore.TensorStore.html" title="tensorstore.TensorStore (Python class) — Asynchronous multi-dimensional array handle."><span class="pre">TensorStore</span></a></span></span></span></dt>
<dd><p>Creates a <a class="reference internal" href="tensorstore.TensorStore.html" title="tensorstore.TensorStore (Python class) — Asynchronous multi-dimensional array handle."><code class="xref py py-obj docutils literal notranslate"><span class="pre">TensorStore</span></code></a> where the content is read/written chunk-wise by an arbitrary function.</p>
<p>Example (read-only):</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">ts</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">ts</span><span class="o">.</span><span class="n">uint32</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">do_read</span><span class="p">(</span><span class="n">domain</span><span class="p">:</span> <span class="n">ts</span><span class="o">.</span><span class="n">IndexDomain</span><span class="p">,</span> <span class="n">array</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
<span class="gp">... </span>                  <span class="n">read_params</span><span class="p">:</span> <span class="n">ts</span><span class="o">.</span><span class="n">VirtualChunkedReadParameters</span><span class="p">):</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Computing content for: </span><span class="si">{</span><span class="n">domain</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">array</span><span class="p">[</span><span class="o">...</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="k">await</span> <span class="n">a</span><span class="p">[</span><span class="n">domain</span><span class="p">]</span><span class="o">.</span><span class="n">read</span><span class="p">())</span> <span class="o">+</span> <span class="mi">100</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">ts</span><span class="o">.</span><span class="n">virtual_chunked</span><span class="p">(</span><span class="n">do_read</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">a</span><span class="o">.</span><span class="n">dtype</span><span class="p">,</span> <span class="n">domain</span><span class="o">=</span><span class="n">a</span><span class="o">.</span><span class="n">domain</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">await</span> <span class="n">t</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="go">Computing content for: { [0, 2), [0, 3) }</span>
<span class="go">array([[101, 102, 103],</span>
<span class="go">       [104, 105, 106]], dtype=uint32)</span>
</code></pre></div>
</div>
<p>Example (read/write):</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">uint32</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">array</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">50</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">do_read</span><span class="p">(</span><span class="n">domain</span><span class="p">,</span> <span class="n">chunk</span><span class="p">,</span> <span class="n">read_context</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">chunk</span><span class="p">[</span><span class="o">...</span><span class="p">]</span> <span class="o">=</span> <span class="n">array</span><span class="p">[</span><span class="n">domain</span><span class="o">.</span><span class="n">index_exp</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">do_write</span><span class="p">(</span><span class="n">domain</span><span class="p">,</span> <span class="n">chunk</span><span class="p">,</span> <span class="n">write_context</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">array</span><span class="p">[</span><span class="n">domain</span><span class="o">.</span><span class="n">index_exp</span><span class="p">]</span> <span class="o">=</span> <span class="n">chunk</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">ts</span><span class="o">.</span><span class="n">virtual_chunked</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">do_read</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">do_write</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">dtype</span><span class="o">=</span><span class="n">array</span><span class="o">.</span><span class="n">dtype</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">shape</span><span class="o">=</span><span class="n">array</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">chunk_layout</span><span class="o">=</span><span class="n">ts</span><span class="o">.</span><span class="n">ChunkLayout</span><span class="p">(</span><span class="n">read_chunk_shape</span><span class="o">=</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">await</span> <span class="n">t</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="go">array([[ 0,  0,  0,  0,  0],</span>
<span class="go">       [50, 50, 50, 50, 50],</span>
<span class="go">       [ 0,  0,  0,  0,  0],</span>
<span class="go">       [ 0,  0,  0,  0,  0]], dtype=uint32)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mi">42</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">array</span>
<span class="go">array([[ 0,  0,  0,  0,  0],</span>
<span class="go">       [50, 42, 42, 50, 50],</span>
<span class="go">       [ 0, 42, 42,  0,  0],</span>
<span class="go">       [ 0,  0,  0,  0,  0]], dtype=uint32)</span>
</code></pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd" id="parameters">Parameters<span class="colon">:</span><a class="headerlink" href="#parameters" title="Permalink to this headline">¶</a></dt>
<dd class="field-odd"><dl class="simple api-field highlight">
<dt id="p-read_function"><span class="n sig-name">read_function</span><span class="p">:</span><span class="w"> </span><span class="n"><span class="desctype"><a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable" title="(in Python v3.11)">Callable</a><span class="p">[</span><span class="p">[</span><a class="reference internal" href="tensorstore.IndexDomain.html" title="tensorstore.IndexDomain (Python class) — Domain (including bounds and optional dimension labels) of an N-dimensional index space.">IndexDomain</a><span class="p">,</span><span class="w"> </span><a class="reference external" href="https://numpy.org/doc/stable/reference/typing.html#numpy.typing.ArrayLike" title="(in NumPy v1.24)">ArrayLike</a><span class="p">,</span><span class="w"> </span><a class="reference internal" href="tensorstore.VirtualChunkedReadParameters.html" title="tensorstore.VirtualChunkedReadParameters (Python class) — Options passed to read callbacks used with virtual_chunked.">VirtualChunkedReadParameters</a><span class="p">]</span><span class="p">,</span><span class="w"> </span><a class="reference internal" href="tensorstore.FutureLike.html" title="tensorstore.FutureLike (Python class) — Abstract base class for types representing an asynchronous result.">FutureLike</a><span class="p">[</span><a class="reference internal" href="tensorstore.KvStore.TimestampedStorageGeneration.html" title="tensorstore.KvStore.TimestampedStorageGeneration (Python class) — Specifies a storage generation identifier and a timestamp.">KvStore.TimestampedStorageGeneration</a><span class="w"> </span><span class="p">|</span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)">None</a><span class="p">]</span><span class="p">]</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)">None</a></span></span><span class="w"> </span><span class="o">=</span><span class="w"> </span><code class="code python default_value docutils literal highlight highlight-python"><span class="kc">None</span></code><a class="headerlink" href="#p-read_function" title="Permalink to this definition">¶</a></dt><dd><p><p>Callback that handles chunk read requests.  Must be specified
to create a virtual view that supports reads.  To create a write-only view,
leave this unspecified (as <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>).</p>
<p>This function should assign to the array the content for the specified
<a class="reference internal" href="tensorstore.IndexDomain.html" title="tensorstore.IndexDomain (Python class) — Domain (including bounds and optional dimension labels) of an N-dimensional index space."><code class="xref py py-obj docutils literal notranslate"><span class="pre">IndexDomain</span></code></a>.</p>
<p>The returned <a class="reference internal" href="tensorstore.KvStore.TimestampedStorageGeneration.html" title="tensorstore.KvStore.TimestampedStorageGeneration (Python class) — Specifies a storage generation identifier and a timestamp."><code class="xref py py-obj docutils literal notranslate"><span class="pre">TimestampedStorageGeneration</span></code></a>
identifies the version of the content, for caching purposes.  If versioning
is not applicable, <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> may be returned to indicate a value that
may be cached indefinitely.</p>
<p>If it returns a <a class="reference external" href="https://docs.python.org/3/reference/compound_stmts.html#async" title="(in Python v3.11)"><span class="xref std std-ref">coroutine</span></a>, the coroutine will be
executed using the event loop indicated by <a class="reference internal" href="#p-loop" title="tensorstore.virtual_chunked.loop (Python parameter) — Event loop on which to execute read_function and/or write_function if they are async functions."><code class="xref py py-param docutils literal notranslate"><span class="pre">loop</span></code></a>.</p>
</p>
</dd>
<dt id="p-write_function"><span class="n sig-name">write_function</span><span class="p">:</span><span class="w"> </span><span class="n"><span class="desctype"><a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable" title="(in Python v3.11)">Callable</a><span class="p">[</span><span class="p">[</span><a class="reference internal" href="tensorstore.IndexDomain.html" title="tensorstore.IndexDomain (Python class) — Domain (including bounds and optional dimension labels) of an N-dimensional index space.">IndexDomain</a><span class="p">,</span><span class="w"> </span><a class="reference external" href="https://numpy.org/doc/stable/reference/typing.html#numpy.typing.ArrayLike" title="(in NumPy v1.24)">ArrayLike</a><span class="p">,</span><span class="w"> </span><a class="reference internal" href="tensorstore.VirtualChunkedWriteParameters.html" title="tensorstore.VirtualChunkedWriteParameters (Python class) — Options passed to write callbacks used with virtual_chunked.">VirtualChunkedWriteParameters</a><span class="p">]</span><span class="p">,</span><span class="w"> </span><a class="reference internal" href="tensorstore.FutureLike.html" title="tensorstore.FutureLike (Python class) — Abstract base class for types representing an asynchronous result.">FutureLike</a><span class="p">[</span><a class="reference internal" href="tensorstore.KvStore.TimestampedStorageGeneration.html" title="tensorstore.KvStore.TimestampedStorageGeneration (Python class) — Specifies a storage generation identifier and a timestamp.">KvStore.TimestampedStorageGeneration</a><span class="w"> </span><span class="p">|</span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)">None</a><span class="p">]</span><span class="p">]</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)">None</a></span></span><span class="w"> </span><span class="o">=</span><span class="w"> </span><code class="code python default_value docutils literal highlight highlight-python"><span class="kc">None</span></code><a class="headerlink" href="#p-write_function" title="Permalink to this definition">¶</a></dt><dd><p><p>Callback that handles chunk write requests.  Must be specified
to create a virtual view that supports writes.  To create a read-only view,
leave this unspecified (as <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>).</p>
<p>This function store the content of the array for the specified
<a class="reference internal" href="tensorstore.IndexDomain.html" title="tensorstore.IndexDomain (Python class) — Domain (including bounds and optional dimension labels) of an N-dimensional index space."><code class="xref py py-obj docutils literal notranslate"><span class="pre">IndexDomain</span></code></a>.</p>
<p>The returned <a class="reference internal" href="tensorstore.KvStore.TimestampedStorageGeneration.html" title="tensorstore.KvStore.TimestampedStorageGeneration (Python class) — Specifies a storage generation identifier and a timestamp."><code class="xref py py-obj docutils literal notranslate"><span class="pre">TimestampedStorageGeneration</span></code></a>
identifies the stored version of the content, for caching purposes.  If
versioning is not applicable, <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> may be returned to indicate a
value that may be cached indefinitely.</p>
<p>If it returns a <a class="reference external" href="https://docs.python.org/3/reference/compound_stmts.html#async" title="(in Python v3.11)"><span class="xref std std-ref">coroutine</span></a>, the coroutine will be
executed using the event loop indicated by <a class="reference internal" href="#p-loop" title="tensorstore.virtual_chunked.loop (Python parameter) — Event loop on which to execute read_function and/or write_function if they are async functions."><code class="xref py py-param docutils literal notranslate"><span class="pre">loop</span></code></a>.</p>
</p>
</dd>
<dt id="p-loop"><span class="n sig-name">loop</span><span class="p">:</span><span class="w"> </span><span class="n"><span class="desctype"><a class="reference external" href="https://docs.python.org/3/library/asyncio-eventloop.html#asyncio.AbstractEventLoop" title="(in Python v3.11)">asyncio.AbstractEventLoop</a><span class="w"> </span><span class="p">|</span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)">None</a></span></span><span class="w"> </span><span class="o">=</span><span class="w"> </span><code class="code python default_value docutils literal highlight highlight-python"><span class="kc">None</span></code><a class="headerlink" href="#p-loop" title="Permalink to this definition">¶</a></dt><dd><p>Event loop on which to execute <a class="reference internal" href="#p-read_function" title="tensorstore.virtual_chunked.read_function (Python parameter) — Callback that handles chunk read requests."><code class="xref py py-param docutils literal notranslate"><span class="pre">read_function</span></code></a> and/or
<a class="reference internal" href="#p-write_function" title="tensorstore.virtual_chunked.write_function (Python parameter) — Callback that handles chunk write requests."><code class="xref py py-param docutils literal notranslate"><span class="pre">write_function</span></code></a> if they are
<a class="reference external" href="https://docs.python.org/3/reference/compound_stmts.html#async-def" title="(in Python v3.11)"><span class="xref std std-ref">async functions</span></a>.  If not specified (or
<a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> is specified), defaults to the loop returned by
<a class="reference external" href="https://docs.python.org/3/library/asyncio-eventloop.html#asyncio.get_running_loop" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">asyncio.get_running_loop</span></code></a> (in the context of the call to
<a class="reference internal" href="#" title="tensorstore.virtual_chunked (Python function) — Creates a TensorStore where the content is read/written chunk-wise by an arbitrary function."><code class="xref py py-obj docutils literal notranslate"><span class="pre">virtual_chunked</span></code></a>).  If <a class="reference internal" href="#p-loop" title="tensorstore.virtual_chunked.loop (Python parameter) — Event loop on which to execute read_function and/or write_function if they are async functions."><code class="xref py py-param docutils literal notranslate"><span class="pre">loop</span></code></a> is not specified and
there is no running event loop, it is an error for
<a class="reference internal" href="#p-read_function" title="tensorstore.virtual_chunked.read_function (Python parameter) — Callback that handles chunk read requests."><code class="xref py py-param docutils literal notranslate"><span class="pre">read_function</span></code></a> or <a class="reference internal" href="#p-write_function" title="tensorstore.virtual_chunked.write_function (Python parameter) — Callback that handles chunk write requests."><code class="xref py py-param docutils literal notranslate"><span class="pre">write_function</span></code></a> to return a
coroutine.</p>
</dd>
<dt id="p-rank"><span class="n sig-name">rank</span><span class="p">:</span><span class="w"> </span><span class="n"><span class="desctype"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)">int</a><span class="w"> </span><span class="p">|</span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)">None</a></span></span><span class="w"> </span><span class="o">=</span><span class="w"> </span><code class="code python default_value docutils literal highlight highlight-python"><span class="kc">None</span></code><a class="headerlink" href="#p-rank" title="Permalink to this definition">¶</a></dt><dd><p>Constrains the rank of the TensorStore.  If there is an index transform, the
rank constraint must match the rank of the <em>input</em> space.</p>
</dd>
<dt id="p-dtype"><span class="n sig-name">dtype</span><span class="p">:</span><span class="w"> </span><span class="n"><span class="desctype"><a class="reference internal" href="tensorstore.dtype.html" title="tensorstore.dtype (Python class) — TensorStore data type representation.">dtype</a><span class="w"> </span><span class="p">|</span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)">None</a></span></span><span class="w"> </span><span class="o">=</span><span class="w"> </span><code class="code python default_value docutils literal highlight highlight-python"><span class="kc">None</span></code><a class="headerlink" href="#p-dtype" title="Permalink to this definition">¶</a></dt><dd><p>Constrains the data type of the TensorStore.  If a data type has already been
set, it is an error to specify a different data type.</p>
</dd>
<dt id="p-domain"><span class="n sig-name">domain</span><span class="p">:</span><span class="w"> </span><span class="n"><span class="desctype"><a class="reference internal" href="tensorstore.IndexDomain.html" title="tensorstore.IndexDomain (Python class) — Domain (including bounds and optional dimension labels) of an N-dimensional index space.">IndexDomain</a><span class="w"> </span><span class="p">|</span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)">None</a></span></span><span class="w"> </span><span class="o">=</span><span class="w"> </span><code class="code python default_value docutils literal highlight highlight-python"><span class="kc">None</span></code><a class="headerlink" href="#p-domain" title="Permalink to this definition">¶</a></dt><dd><p><p>Constrains the domain of the TensorStore.  If there is an existing
domain, the specified domain is merged with it as follows:</p>
<ol class="arabic simple">
<li><p>The rank must match the existing rank.</p></li>
<li><p>All bounds must match, except that a finite or explicit bound is permitted to
match an infinite and implicit bound, and takes precedence.</p></li>
<li><p>If both the new and existing domain specify non-empty labels for a dimension,
the labels must be equal.  If only one of the domains specifies a non-empty
label for a dimension, the non-empty label takes precedence.</p></li>
</ol>
<p>Note that if there is an index transform, the domain must match the <em>input</em>
space, not the output space.</p>
</p>
</dd>
<dt id="p-shape"><span class="n sig-name">shape</span><span class="p">:</span><span class="w"> </span><span class="n"><span class="desctype"><a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence" title="(in Python v3.11)">Sequence</a><span class="p">[</span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)">int</a><span class="p">]</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)">None</a></span></span><span class="w"> </span><span class="o">=</span><span class="w"> </span><code class="code python default_value docutils literal highlight highlight-python"><span class="kc">None</span></code><a class="headerlink" href="#p-shape" title="Permalink to this definition">¶</a></dt><dd><p><p>Constrains the shape and origin of the TensorStore.  Equivalent to specifying a
<a class="reference internal" href="#p-domain" title="tensorstore.virtual_chunked.domain (Python parameter) — Constrains the domain of the TensorStore."><code class="xref py py-param docutils literal notranslate"><span class="pre">domain</span></code></a> of <code class="code highlight python docutils literal highlight-python"><span class="n">ts</span><span class="o">.</span><span class="n">IndexDomain</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="n">shape</span><span class="p">)</span></code>.</p>
<div class="note admonition">
<p class="admonition-title">Note</p>
<p>This option also constrains the origin of all dimensions to be zero.</p>
</div>
</p>
</dd>
<dt id="p-chunk_layout"><span class="n sig-name">chunk_layout</span><span class="p">:</span><span class="w"> </span><span class="n"><span class="desctype"><a class="reference internal" href="tensorstore.ChunkLayout.html" title="tensorstore.ChunkLayout (Python class) — Describes the storage layout of a tensorstore.TensorStore.">ChunkLayout</a><span class="w"> </span><span class="p">|</span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)">None</a></span></span><span class="w"> </span><span class="o">=</span><span class="w"> </span><code class="code python default_value docutils literal highlight highlight-python"><span class="kc">None</span></code><a class="headerlink" href="#p-chunk_layout" title="Permalink to this definition">¶</a></dt><dd><p>Constrains the chunk layout.  If there is an existing chunk layout constraint,
the constraints are merged.  If the constraints are incompatible, an error
is raised.</p>
</dd>
<dt id="p-dimension_units"><span class="n sig-name">dimension_units</span><span class="p">:</span><span class="w"> </span><span class="n"><span class="desctype"><a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence" title="(in Python v3.11)">Sequence</a><span class="p">[</span><a class="reference internal" href="tensorstore.Unit.html" title="tensorstore.Unit (Python class) — Specifies a physical quantity/unit.">Unit</a><span class="w"> </span><span class="p">|</span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a><span class="w"> </span><span class="p">|</span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/numbers.html#numbers.Real" title="(in Python v3.11)">Real</a><span class="w"> </span><span class="p">|</span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.11)">tuple</a><span class="p">[</span><a class="reference external" href="https://docs.python.org/3/library/numbers.html#numbers.Real" title="(in Python v3.11)">Real</a><span class="p">,</span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a><span class="p">]</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)">None</a><span class="p">]</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)">None</a></span></span><span class="w"> </span><span class="o">=</span><span class="w"> </span><code class="code python default_value docutils literal highlight highlight-python"><span class="kc">None</span></code><a class="headerlink" href="#p-dimension_units" title="Permalink to this definition">¶</a></dt><dd><p><p>Specifies the physical units of each dimension of the domain.</p>
<p>The <em>physical unit</em> for a dimension is the physical quantity corresponding to a
single index increment along each dimension.</p>
<p>A value of <code class="code highlight python docutils literal highlight-python"><span class="kc">None</span></code> indicates that the unit is unknown.  A dimension-less
quantity can be indicated by a unit of <code class="code highlight python docutils literal highlight-python"><span class="s2">&quot;&quot;</span></code>.</p>
</p>
</dd>
<dt id="p-schema"><span class="n sig-name">schema</span><span class="p">:</span><span class="w"> </span><span class="n"><span class="desctype"><a class="reference internal" href="tensorstore.Schema.html" title="tensorstore.Schema (Python class) — Driver-independent options for defining a TensorStore schema.">Schema</a><span class="w"> </span><span class="p">|</span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)">None</a></span></span><span class="w"> </span><span class="o">=</span><span class="w"> </span><code class="code python default_value docutils literal highlight highlight-python"><span class="kc">None</span></code><a class="headerlink" href="#p-schema" title="Permalink to this definition">¶</a></dt><dd><p>Additional schema constraints to merge with existing constraints.</p>
</dd>
<dt id="p-context"><span class="n sig-name">context</span><span class="p">:</span><span class="w"> </span><span class="n"><span class="desctype"><a class="reference internal" href="tensorstore.Context.html" title="tensorstore.Context (Python class) — Manages shared TensorStore context resources, such as caches and credentials.">Context</a><span class="w"> </span><span class="p">|</span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)">None</a></span></span><span class="w"> </span><span class="o">=</span><span class="w"> </span><code class="code python default_value docutils literal highlight highlight-python"><span class="kc">None</span></code><a class="headerlink" href="#p-context" title="Permalink to this definition">¶</a></dt><dd><p>Shared resource context.  Defaults to a new (unshared) context with default
options, as returned by <a class="reference internal" href="tensorstore.Context.html" title="tensorstore.Context (Python class) — Manages shared TensorStore context resources, such as caches and credentials."><code class="xref py py-meth docutils literal notranslate"><span class="pre">tensorstore.Context()</span></code></a>.  To share resources,
such as cache pools, between multiple open TensorStores, you must specify a
context.</p>
</dd>
<dt id="p-transaction"><span class="n sig-name">transaction</span><span class="p">:</span><span class="w"> </span><span class="n"><span class="desctype"><a class="reference internal" href="tensorstore.Transaction.html" title="tensorstore.Transaction (Python class) — Transactions are used to stage a group of modifications (e.g. writes to tensorstore.TensorStore objects) in memory, and then either commit the group all at once or abort it.">Transaction</a><span class="w"> </span><span class="p">|</span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)">None</a></span></span><span class="w"> </span><span class="o">=</span><span class="w"> </span><code class="code python default_value docutils literal highlight highlight-python"><span class="kc">None</span></code><a class="headerlink" href="#p-transaction" title="Permalink to this definition">¶</a></dt><dd><p><p>Transaction to use for opening/creating, and for subsequent operations.  By
default, the open is non-transactional.</p>
<div class="note admonition">
<p class="admonition-title">Note</p>
<p>To perform transactional operations using a TensorStore that was previously
opened without a transaction, use <a class="reference internal" href="tensorstore.TensorStore.with_transaction.html" title="tensorstore.TensorStore.with_transaction (Python method) — Returns a transaction-bound view of this TensorStore."><code class="xref py py-obj docutils literal notranslate"><span class="pre">TensorStore.with_transaction</span></code></a>.</p>
</div>
</p>
</dd>
</dl>
</dd>
</dl>
<div class="warning admonition">
<p class="admonition-title">Warning</p>
<p>Neither <a class="reference internal" href="#p-read_function" title="tensorstore.virtual_chunked.read_function (Python parameter) — Callback that handles chunk read requests."><code class="xref py py-param docutils literal notranslate"><span class="pre">read_function</span></code></a> nor <a class="reference internal" href="#p-write_function" title="tensorstore.virtual_chunked.write_function (Python parameter) — Callback that handles chunk write requests."><code class="xref py py-param docutils literal notranslate"><span class="pre">write_function</span></code></a> should
block synchronously while waiting for another TensorStore operation; blocking
on another operation that uses the same
<a class="reference internal" href="../../kvstore/tsgrpc/index.html#json-Context.data_copy_concurrency" title="Context.data_copy_concurrency (JSON type)"><code class="xref json json-schema docutils literal notranslate"><span class="pre">Context.data_copy_concurrency</span></code></a> resource may result in deadlock.
Instead, it is better to specify a <a class="reference external" href="https://docs.python.org/3/reference/compound_stmts.html#async-def" title="(in Python v3.11)"><span class="xref std std-ref">coroutine function</span></a>
for <a class="reference internal" href="#p-read_function" title="tensorstore.virtual_chunked.read_function (Python parameter) — Callback that handles chunk read requests."><code class="xref py py-param docutils literal notranslate"><span class="pre">read_function</span></code></a> and <a class="reference internal" href="#p-write_function" title="tensorstore.virtual_chunked.write_function (Python parameter) — Callback that handles chunk write requests."><code class="xref py py-param docutils literal notranslate"><span class="pre">write_function</span></code></a> and use
<a class="reference external" href="https://docs.python.org/3/reference/expressions.html#await" title="(in Python v3.11)"><span class="xref std std-ref">await</span></a> to wait for the result of other TensorStore
operations.</p>
</div>
<h2 id="caching">Caching<a class="headerlink" href="#caching" title="Link to this heading">¶</a></h2>
<p>By default, the computed content of chunks is not cached, and will be
recomputed on every read.  To enable caching:</p>
<ul class="simple">
<li><p>Specify a <a class="reference internal" href="tensorstore.Context.html" title="tensorstore.Context (Python class) — Manages shared TensorStore context resources, such as caches and credentials."><code class="xref py py-obj docutils literal notranslate"><span class="pre">Context</span></code></a> that contains a
<a class="reference internal" href="../../context.html#json-Context.cache_pool" title="Context.cache_pool (JSON type)"><code class="xref json json-schema docutils literal notranslate"><span class="pre">cache_pool</span></code></a> with a non-zero size limit, e.g.:
<code class="code highlight json docutils literal highlight-json"><span class="p">{</span><span class="nt">&quot;cache_pool&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;total_bytes_limit&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">100000000</span><span class="p">}}</span></code> for 100MB.</p></li>
<li><p>Additionally, if the data is not immutable, the <a class="reference internal" href="#p-read_function" title="tensorstore.virtual_chunked.read_function (Python parameter) — Callback that handles chunk read requests."><code class="xref py py-param docutils literal notranslate"><span class="pre">read_function</span></code></a>
should return a unique generation and a timestamp that is not
<code class="code highlight python docutils literal highlight-python"><span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">)</span></code>.  When a cached chunk is re-read, the
<a class="reference internal" href="#p-read_function" title="tensorstore.virtual_chunked.read_function (Python parameter) — Callback that handles chunk read requests."><code class="xref py py-param docutils literal notranslate"><span class="pre">read_function</span></code></a> will be called with
<a class="reference internal" href="tensorstore.VirtualChunkedReadParameters.if_not_equal.html" title="tensorstore.VirtualChunkedReadParameters.if_not_equal (Python property) — Cached generation, read request can be skipped if no newer data is available."><code class="xref py py-obj docutils literal notranslate"><span class="pre">if_not_equal</span></code></a> specified.
If the generation specified by
<a class="reference internal" href="tensorstore.VirtualChunkedReadParameters.if_not_equal.html" title="tensorstore.VirtualChunkedReadParameters.if_not_equal (Python property) — Cached generation, read request can be skipped if no newer data is available."><code class="xref py py-obj docutils literal notranslate"><span class="pre">if_not_equal</span></code></a> is still
current, the <a class="reference internal" href="#p-read_function" title="tensorstore.virtual_chunked.read_function (Python parameter) — Callback that handles chunk read requests."><code class="xref py py-param docutils literal notranslate"><span class="pre">read_function</span></code></a> may leave the output array unmodified
and return a <a class="reference internal" href="tensorstore.KvStore.TimestampedStorageGeneration.html" title="tensorstore.KvStore.TimestampedStorageGeneration (Python class) — Specifies a storage generation identifier and a timestamp."><code class="xref py py-obj docutils literal notranslate"><span class="pre">TimestampedStorageGeneration</span></code></a> with
an appropriate
<a class="reference internal" href="tensorstore.KvStore.TimestampedStorageGeneration.time.html" title="tensorstore.KvStore.TimestampedStorageGeneration.time (Python property) — Time (seconds since Unix epoch) at which generation is valid."><code class="xref py py-obj docutils literal notranslate"><span class="pre">time</span></code></a> but
<a class="reference internal" href="tensorstore.KvStore.TimestampedStorageGeneration.generation.html" title="tensorstore.KvStore.TimestampedStorageGeneration.generation (Python property) — Identifies a specific version of a key-value store entry."><code class="xref py py-obj docutils literal notranslate"><span class="pre">generation</span></code></a> left
unspecified.</p></li>
</ul>
<h2 id="pickle-support">Pickle support<a class="headerlink" href="#pickle-support" title="Link to this heading">¶</a></h2>
<p>The returned <a class="reference internal" href="tensorstore.TensorStore.html" title="tensorstore.TensorStore (Python class) — Asynchronous multi-dimensional array handle."><code class="xref py py-obj docutils literal notranslate"><span class="pre">TensorStore</span></code></a> supports pickling if, and only if, the
<a class="reference internal" href="#p-read_function" title="tensorstore.virtual_chunked.read_function (Python parameter) — Callback that handles chunk read requests."><code class="xref py py-param docutils literal notranslate"><span class="pre">read_function</span></code></a> and <a class="reference internal" href="#p-write_function" title="tensorstore.virtual_chunked.write_function (Python parameter) — Callback that handles chunk write requests."><code class="xref py py-param docutils literal notranslate"><span class="pre">write_function</span></code></a> support pickling.</p>
<div class="note admonition">
<p class="admonition-title">Note</p>
<p>The <a class="reference external" href="https://docs.python.org/3/library/pickle.html#module-pickle" title="(in Python v3.11)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pickle</span></code></a> module only supports global functions defined in named
modules.  For broader function support, you may wish to use
<a class="reference external" href="https://github.com/cloudpipe/cloudpickle">cloudpickle</a>.</p>
</div>
<div class="warning admonition">
<p class="admonition-title">Warning</p>
<p>The specified <a class="reference internal" href="#p-loop" title="tensorstore.virtual_chunked.loop (Python parameter) — Event loop on which to execute read_function and/or write_function if they are async functions."><code class="xref py py-param docutils literal notranslate"><span class="pre">loop</span></code></a> is not preserved when the returned
<a class="reference internal" href="tensorstore.TensorStore.html" title="tensorstore.TensorStore (Python class) — Asynchronous multi-dimensional array handle."><code class="xref py py-obj docutils literal notranslate"><span class="pre">TensorStore</span></code></a> is pickled, since it is a property of the current
thread.  Instead, when unpickled, the resultant <a class="reference internal" href="tensorstore.TensorStore.html" title="tensorstore.TensorStore (Python class) — Asynchronous multi-dimensional array handle."><code class="xref py py-obj docutils literal notranslate"><span class="pre">TensorStore</span></code></a> will
use the running event loop (as returned by
<a class="reference external" href="https://docs.python.org/3/library/asyncio-eventloop.html#asyncio.get_running_loop" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">asyncio.get_running_loop</span></code></a>) of the thread used for unpickling, if
there is one.</p>
</div>
<h2 id="transaction-support">Transaction support<a class="headerlink" href="#transaction-support" title="Link to this heading">¶</a></h2>
<p>Transactional reads and writes are supported on virtual_chunked views.  A
transactional write simply serves to buffer the write in memory until it is
committed.  Transactional reads will observe prior writes made using the same
transaction.  However, when the transaction commit is initiated, the
<a class="reference internal" href="#p-write_function" title="tensorstore.virtual_chunked.write_function (Python parameter) — Callback that handles chunk write requests."><code class="xref py py-param docutils literal notranslate"><span class="pre">write_function</span></code></a> is called in exactly the same way as for a
non-transactional write, and if more than one chunk is affected, the commit will
be non-atomic.  If the transaction is atomic, it is an error to write to more
than one chunk in the same transaction.</p>
<p>You are also free to use transactional operations, e.g. operations on a
<a class="reference internal" href="tensorstore.KvStore.html" title="tensorstore.KvStore (Python class) — Key-value store that maps an ordered set of byte string keys to byte string values."><code class="xref py py-class docutils literal notranslate"><span class="pre">KvStore</span></code></a> or another <a class="reference internal" href="tensorstore.TensorStore.html" title="tensorstore.TensorStore (Python class) — Asynchronous multi-dimensional array handle."><code class="xref py py-class docutils literal notranslate"><span class="pre">TensorStore</span></code></a>, within the
<a class="reference internal" href="#p-read_function" title="tensorstore.virtual_chunked.read_function (Python parameter) — Callback that handles chunk read requests."><code class="xref py py-param docutils literal notranslate"><span class="pre">read_function</span></code></a> or <a class="reference internal" href="#p-write_function" title="tensorstore.virtual_chunked.write_function (Python parameter) — Callback that handles chunk write requests."><code class="xref py py-param docutils literal notranslate"><span class="pre">write_function</span></code></a>.</p>
<ul class="simple">
<li><p>For read-write views, you should not attempt to use the same transaction
within the <a class="reference internal" href="#p-read_function" title="tensorstore.virtual_chunked.read_function (Python parameter) — Callback that handles chunk read requests."><code class="xref py py-param docutils literal notranslate"><span class="pre">read_function</span></code></a> or <a class="reference internal" href="#p-write_function" title="tensorstore.virtual_chunked.write_function (Python parameter) — Callback that handles chunk write requests."><code class="xref py py-param docutils literal notranslate"><span class="pre">write_function</span></code></a> that is
also used for read or write operations on the virtual view directly, because
both <a class="reference internal" href="#p-write_function" title="tensorstore.virtual_chunked.write_function (Python parameter) — Callback that handles chunk write requests."><code class="xref py py-param docutils literal notranslate"><span class="pre">write_function</span></code></a> and <a class="reference internal" href="#p-read_function" title="tensorstore.virtual_chunked.read_function (Python parameter) — Callback that handles chunk read requests."><code class="xref py py-param docutils literal notranslate"><span class="pre">read_function</span></code></a> may be called
after the commit starts, and any attempt to perform new operations using the
same transaction once it is already being committed will fail; instead, any
transactional operations performed within the <a class="reference internal" href="#p-read_function" title="tensorstore.virtual_chunked.read_function (Python parameter) — Callback that handles chunk read requests."><code class="xref py py-param docutils literal notranslate"><span class="pre">read_function</span></code></a> or
<a class="reference internal" href="#p-write_function" title="tensorstore.virtual_chunked.write_function (Python parameter) — Callback that handles chunk write requests."><code class="xref py py-param docutils literal notranslate"><span class="pre">write_function</span></code></a> should use a different transaction.</p></li>
<li><p>For read-only views, it is possible to use the same transaction within the
<a class="reference internal" href="#p-read_function" title="tensorstore.virtual_chunked.read_function (Python parameter) — Callback that handles chunk read requests."><code class="xref py py-param docutils literal notranslate"><span class="pre">read_function</span></code></a> as is also used for read operations on the virtual
view directly, though this may not be particularly useful.</p></li>
</ul>
<p>Specifying a transaction directly when creating the virtual chunked view is no
different than binding the transaction to an existing virtual chunked view.</p>
</dd></dl>







                
              </article>
            </div>
          
          
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="tensorstore.VirtualChunkedWriteParameters.if_equal.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: tensorstore.VirtualChunkedWriteParameters.if_equal" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              tensorstore.VirtualChunkedWriteParameters.if_equal
            </div>
          </div>
        </a>
      
      
        
        <a href="tensorstore.dtype.html" class="md-footer__link md-footer__link--next" aria-label="Next: tensorstore.dtype" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              tensorstore.dtype
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  
  
  <div class="md-footer-meta md-typeset">
    
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.expand", "navigation.sections", "navigation.top", "toc.follow", "toc.sticky"], "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
      
        <script src="../../_static/sphinx_immaterial_theme.f9d9eeeb247ace16c.min.js?v=8ec58cb5"></script>
    
  </body>
</html>