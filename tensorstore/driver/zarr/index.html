

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>zarr Driver &mdash; TensorStore  documentation</title>
  

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/sphinx_rtd_theme_table_word_wrap_fix.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"displayAlign": "left"})</script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="n5 Driver" href="../n5/index.html" />
    <link rel="prev" title="json Driver" href="../json/index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> TensorStore
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../installation.html">Building and Installing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../environment.html">Environment variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../index_space.html">Index space</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../context.html">Context framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../spec.html">TensorStore JSON Spec</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Drivers</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../cast/index.html"><code class="docutils literal notranslate"><span class="pre">cast</span></code> Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../downsample/index.html"><code class="docutils literal notranslate"><span class="pre">downsample</span></code> Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../array/index.html"><code class="docutils literal notranslate"><span class="pre">array</span></code> Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#single-file-drivers">Single file drivers</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#chunked-storage-drivers">Chunked storage drivers</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#"><code class="docutils literal notranslate"><span class="pre">zarr</span></code> Driver</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#json-schema">JSON Schema</a></li>
<li class="toctree-l4"><a class="reference internal" href="#compressors">Compressors</a></li>
<li class="toctree-l4"><a class="reference internal" href="#limitations">Limitations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../n5/index.html"><code class="docutils literal notranslate"><span class="pre">n5</span></code> Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../neuroglancer_precomputed/index.html"><code class="docutils literal notranslate"><span class="pre">neuroglancer_precomputed</span></code> Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../index.html#chunked-storage-driver-json-schema">Chunked storage driver JSON Schema</a></li>
<li class="toctree-l3"><a class="reference internal" href="../index.html#cache-revalidation-bound-json-schema">Cache revalidation bound JSON Schema</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../kvstore/index.html">Key-Value Storage Layer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../python/index.html">Python API</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">TensorStore</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">Drivers</a> &raquo;</li>
        
      <li><code class="docutils literal notranslate"><span class="pre">zarr</span></code> Driver</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="zarr-driver">
<span id="id1"></span><h1><code class="docutils literal notranslate"><span class="pre">zarr</span></code> Driver<a class="headerlink" href="#zarr-driver" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="https://github.com/zarr-developers/zarr-python">Zarr</a> is a chunked
array storage format based on the <a class="reference external" href="https://zarr.readthedocs.io/en/stable/spec/v2.html#data-type-encoding">NumPy data type model</a>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">zarr</span></code> driver provides access to Zarr-format arrays backed by
any supported <a class="reference internal" href="../../kvstore/index.html#key-value-store"><span class="std std-ref">Key-Value Storage Layer</span></a>.  It supports reading, writing,
creating new arrays, and resizing arrays.</p>
<p>Zarr supports arrays with <a class="reference external" href="https://zarr.readthedocs.io/en/stable/spec/v2.html#data-type-encoding">structural data types</a>
specifying multiple named fields that are packed together.
TensorStore fully supports such arrays, but each field must be opened
separately.</p>
<div class="section" id="json-schema">
<span id="json-schema-https://github.com/google/tensorstore/json-schema/driver/zarr"></span><h2>JSON Schema<a class="headerlink" href="#json-schema" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">object</span></code> with members:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 0%" />
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">driver</span></code><div class="docutils container">
<strong>Required</strong></div>
</td>
<td><div class="docutils container">
<code class="code highlight json docutils literal notranslate"><span class="literal string double"><span class="pre">“zarr”</span></span></code></div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">context</span></code></td>
<td><div class="docutils container">
<span><a class="reference internal" href="../../../context.html#json-schema-https://github.com/google/tensorstore/json-schema/context"><span class="std std-ref">Context</span></a></span></div>
<p>Specifies context resources that augment/override the parent context.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">dtype</span></code></td>
<td><div class="docutils container">
<span><a class="reference internal" href="../../../spec.html#json-schema-https://github.com/google/tensorstore/json-schema/dtype"><span class="std std-ref">Data type</span></a></span></div>
<p>Specifies the data type.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">rank</span></code></td>
<td><div class="docutils container">
integer [0, ∞)</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">transform</span></code></td>
<td><div class="docutils container">
<span><a class="reference internal" href="../../../index_space.html#json-schema-https://github.com/google/tensorstore/json-schema/index-transform"><span class="std std-ref">Index transform</span></a></span></div>
<p>Specifies a transform.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">kvstore</span></code><div class="docutils container">
<strong>Required</strong></div>
</td>
<td><div class="docutils container">
<span><a class="reference internal" href="../../kvstore/index.html#json-schema-https://github.com/google/tensorstore/json-schema/key-value-store"><span class="std std-ref">Key-Value Store</span></a></span></div>
<p>Specifies the underlying storage mechanism.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">path</span></code></td>
<td><div class="docutils container">
string (default is <code class="code highlight json docutils literal notranslate"><span class="literal string double"><span class="pre">“”</span></span></code>)</div>
<p>Path within the <a class="reference internal" href="../../kvstore/index.html#json-schema-https://github.com/google/tensorstore/json-schema/key-value-store"><span class="std std-ref">Key-Value Store</span></a> specified by <code class="docutils literal notranslate"><span class="pre">kvstore</span></code>.</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">Example</span><a class="headerlink" href="#id2" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;path/to/data&quot;</span>
</pre></div>
</div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">open</span></code></td>
<td><div class="docutils container">
<code class="docutils literal notranslate"><span class="pre">boolean</span></code></div>
<p>Open an existing TensorStore.  If neither <code class="docutils literal notranslate"><span class="pre">open</span></code> nor <code class="docutils literal notranslate"><span class="pre">create</span></code> is specified, defaults to <code class="code highlight json docutils literal notranslate"><span class="keyword constant"><span class="pre">true</span></span></code>.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">create</span></code></td>
<td><div class="docutils container">
<code class="docutils literal notranslate"><span class="pre">boolean</span></code> (default is <code class="code highlight json docutils literal notranslate"><span class="keyword constant"><span class="pre">false</span></span></code>)</div>
<p>Create a new TensorStore.  Specify <code class="code highlight json docutils literal notranslate"><span class="keyword constant"><span class="pre">true</span></span></code> for both <code class="docutils literal notranslate"><span class="pre">open</span></code> and <code class="docutils literal notranslate"><span class="pre">create</span></code> to permit either opening an existing TensorStore or creating a new TensorStore if it does not already exist.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">delete_existing</span></code></td>
<td><div class="docutils container">
<code class="docutils literal notranslate"><span class="pre">boolean</span></code> (default is <code class="code highlight json docutils literal notranslate"><span class="keyword constant"><span class="pre">false</span></span></code>)</div>
<p>Delete any existing data at the specified path before creating a new TensorStore.  Requires that <code class="docutils literal notranslate"><span class="pre">create</span></code> is <code class="code highlight json docutils literal notranslate"><span class="keyword constant"><span class="pre">true</span></span></code>, and that <code class="docutils literal notranslate"><span class="pre">open</span></code> is <code class="code highlight json docutils literal notranslate"><span class="keyword constant"><span class="pre">false</span></span></code>.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">allow_metadata_mismatch</span></code></td>
<td><div class="docutils container">
<code class="docutils literal notranslate"><span class="pre">boolean</span></code> (default is <code class="code highlight json docutils literal notranslate"><span class="keyword constant"><span class="pre">false</span></span></code>)</div>
<p>Allow a mismatch between the existing metadata and the metadata specified for creating a new TensorStore.  Requires that <code class="docutils literal notranslate"><span class="pre">create</span></code> is <code class="code highlight json docutils literal notranslate"><span class="keyword constant"><span class="pre">true</span></span></code>.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">cache_pool</span></code></td>
<td><div class="docutils container">
<span><a class="reference internal" href="../../../context.html#json-schema-https://github.com/google/tensorstore/json-schema/context-resource"><span class="std std-ref">Context resource</span></a></span> (default is <code class="code highlight json docutils literal notranslate"><span class="literal string double"><span class="pre">“cache_pool”</span></span></code>)</div>
<p>Specifies or references a previously defined <a class="reference internal" href="../../../context.html#json-schema-https://github.com/google/tensorstore/json-schema/context/cache_pool"><span class="std std-ref">cache_pool context resource</span></a>. It is normally more convenient to specify a default <code class="docutils literal notranslate"><span class="pre">cache_pool</span></code> in the <code class="docutils literal notranslate"><span class="pre">context</span></code>.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">data_copy_concurrency</span></code></td>
<td><div class="docutils container">
<span><a class="reference internal" href="../../../context.html#json-schema-https://github.com/google/tensorstore/json-schema/context-resource"><span class="std std-ref">Context resource</span></a></span> (default is <code class="code highlight json docutils literal notranslate"><span class="literal string double"><span class="pre">“data_copy_concurrency”</span></span></code>)</div>
<p>Specifies or references a previously defined <a class="reference internal" href="../../../context.html#json-schema-https://github.com/google/tensorstore/json-schema/context/data_copy_concurrency"><span class="std std-ref">data_copy_concurrency context resource</span></a>. It is normally more convenient to specify a default <code class="docutils literal notranslate"><span class="pre">data_copy_concurrency</span></code> in the <code class="docutils literal notranslate"><span class="pre">context</span></code>.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">recheck_cached_metadata</span></code></td>
<td><div class="docutils container">
<span><a class="reference internal" href="../index.html#json-schema-https://github.com/google/tensorstore/json-schema/cache-revalidation-bound"><span class="std std-ref">Cache revalidation bound</span></a></span> (default is <code class="code highlight json docutils literal notranslate"><span class="literal string double"><span class="pre">“open”</span></span></code>)</div>
<p>Time after which cached metadata is assumed to be fresh.  Cached
metadata older than the specified time is revalidated prior to use.  The
metadata is used to check the bounds of every read or write operation.</p>
<p>Specifying <code class="code highlight json docutils literal notranslate"><span class="keyword constant"><span class="pre">true</span></span></code> means that the metadata will be revalidated
prior to every read or write operation.  With the default value of
<code class="code highlight json docutils literal notranslate"><span class="literal string double"><span class="pre">“open”</span></span></code>, any cached metadata is revalidated when the TensorStore
is opened but is not rechecked for each read or write operation.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">recheck_cached_data</span></code></td>
<td><div class="docutils container">
<span><a class="reference internal" href="../index.html#json-schema-https://github.com/google/tensorstore/json-schema/cache-revalidation-bound"><span class="std std-ref">Cache revalidation bound</span></a></span> (default is <code class="code highlight json docutils literal notranslate"><span class="keyword constant"><span class="pre">true</span></span></code>)</div>
<p>Time after which cached data is assumed to be fresh.  Cached data older
than the specified time is revalidated prior to being returned from a
read operation.  Partial chunk writes are always consistent regardless
of the value of this option.</p>
<p>The default value of <code class="code highlight json docutils literal notranslate"><span class="keyword constant"><span class="pre">true</span></span></code> means that cached data is revalidated
on every read.  To enable in-memory data caching, you must both specify
a <a class="reference internal" href="../../../context.html#json-schema-https://github.com/google/tensorstore/json-schema/context/cache_pool"><span class="std std-ref">cache_pool context resource</span></a>
with a non-zero <code class="docutils literal notranslate"><span class="pre">total_bytes_limit</span></code> and also specify
<code class="code highlight json docutils literal notranslate"><span class="keyword constant"><span class="pre">false</span></span></code>, <code class="code highlight json docutils literal notranslate"><span class="literal string double"><span class="pre">“open”</span></span></code>, or an explicit time bound for
<code class="docutils literal notranslate"><span class="pre">recheck_cached_data</span></code>.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">field</span></code></td>
<td><div class="docutils container">
string | <code class="code highlight json docutils literal notranslate"><span class="keyword constant"><span class="pre">null</span></span></code> (default is <code class="code highlight json docutils literal notranslate"><span class="keyword constant"><span class="pre">null</span></span></code>)</div>
<span>Name of field to open.  </span><p>Must be specified if the <code class="docutils literal notranslate"><span class="pre">dtype</span></code> specified in the array
metadata has more than one field.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">key_encoding</span></code></td>
<td><div class="docutils container">
<code class="code highlight json docutils literal notranslate"><span class="literal string double"><span class="pre">“.”</span></span></code> | <code class="code highlight json docutils literal notranslate"><span class="literal string double"><span class="pre">“/”</span></span></code> (default is <code class="code highlight json docutils literal notranslate"><span class="literal string double"><span class="pre">“.”</span></span></code>)</div>
<span>Specifies the encoding of chunk indices into key-value store keys.  </span><p>The default value of <code class="code highlight json docutils literal notranslate"><span class="literal string double"><span class="pre">“.”</span></span></code> corresponds to the default encoding
used by Zarr, while <code class="code highlight json docutils literal notranslate"><span class="literal string double"><span class="pre">“/”</span></span></code> corresponds to the encoding used by
<a class="reference external" href="https://zarr.readthedocs.io/en/stable/api/storage.html#zarr.storage.NestedDirectoryStore" title="(in zarr v2.6.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">zarr.storage.NestedDirectoryStore</span></code></a>.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">metadata</span></code></td>
<td><span>Zarr array metadata.  </span><p>Specifies the metadata of a new array exactly as in the <a class="reference external" href="https://zarr.readthedocs.io/en/stable/spec/v2.html#metadata">.zarray
metadata file</a>, except
that not all members are required.  Required when creating a new array.
When opening an existing array, specifies constraints on the existing
metadata.</p>
<p><code class="docutils literal notranslate"><span class="pre">object</span></code> with members:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 0%" />
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">zarr_format</span></code></td>
<td><div class="docutils container">
<code class="code highlight json docutils literal notranslate"><span class="literal number integer"><span class="pre">2</span></span></code></div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">shape</span></code></td>
<td><div class="docutils container">
array of integer [0, ∞)</div>
<span>Dimensions of the array.  </span><p>Required when creating a new array.</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">Example</span><a class="headerlink" href="#id3" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mi">500</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="mi">500</span><span class="p">]</span>
</pre></div>
</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">chunks</span></code></td>
<td><div class="docutils container">
array of integer [1, ∞)</div>
<span>Chunk dimensions.  </span><p>Required when creating a new array.  Must have the same length as <code class="docutils literal notranslate"><span class="pre">shape</span></code>.</p>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text">Example</span><a class="headerlink" href="#id4" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mi">64</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">64</span><span class="p">]</span>
</pre></div>
</div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">dtype</span></code></td>
<td><span>Specifies the single-field or multiple-field data type.  </span><p>Refer to the <a class="reference external" href="https://zarr.readthedocs.io/en/stable/spec/v2.html#data-type-encoding">Zarr data type encoding specification</a>.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">compressor</span></code></td>
<td><div class="docutils container">
<span><a class="reference internal" href="#json-schema-https://github.com/google/tensorstore/json-schema/driver/zarr#compressor"><span class="std std-ref">Compressor</span></a></span> | <code class="code highlight json docutils literal notranslate"><span class="keyword constant"><span class="pre">null</span></span></code></div>
<p>Specifies the chunk compressor.  Specifying <code class="code highlight json docutils literal notranslate"><span class="keyword constant"><span class="pre">null</span></span></code> disables
compression.  Required when creating a new array.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">fill_value</span></code></td>
<td><span>Specifies the fill value.  </span><p>When creating a new array, defaults to <code class="code highlight json docutils literal notranslate"><span class="keyword constant"><span class="pre">null</span></span></code>.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">order</span></code></td>
<td><div class="docutils container">
<code class="code highlight json docutils literal notranslate"><span class="literal string double"><span class="pre">“C”</span></span></code> | <code class="code highlight json docutils literal notranslate"><span class="literal string double"><span class="pre">“F”</span></span></code></div>
<span>Specifies the data layout for encoded chunks.  </span><p><code class="code highlight json docutils literal notranslate"><span class="literal string double"><span class="pre">“C”</span></span></code> for C order, <code class="code highlight json docutils literal notranslate"><span class="literal string double"><span class="pre">“F”</span></span></code> for Fortran order.  When
creating a new array, defaults to <code class="code highlight json docutils literal notranslate"><span class="literal string double"><span class="pre">“C”</span></span></code>.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">filters</span></code></td>
<td><div class="docutils container">
<code class="code highlight json docutils literal notranslate"><span class="keyword constant"><span class="pre">null</span></span></code></div>
<span>Specifies the filters to apply to chunks.  </span><p>When encoding chunk, filters are applied before the compressor.
Currently, filters are not supported.</p>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-text">Example</span><a class="headerlink" href="#id5" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span> 
  <span class="nt">&quot;driver&quot;</span><span class="p">:</span> <span class="s2">&quot;zarr&quot;</span><span class="p">,</span>
  <span class="nt">&quot;kvstore&quot;</span><span class="p">:</span> <span class="p">{</span><span class="nt">&quot;driver&quot;</span><span class="p">:</span> <span class="s2">&quot;gcs&quot;</span><span class="p">,</span> <span class="nt">&quot;bucket&quot;</span><span class="p">:</span> <span class="s2">&quot;my-bucket&quot;</span><span class="p">},</span>
  <span class="nt">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;path/to/array&quot;</span><span class="p">,</span>
  <span class="nt">&quot;key_encoding&quot;</span><span class="p">:</span> <span class="s2">&quot;.&quot;</span><span class="p">,</span>
  <span class="nt">&quot;metadata&quot;</span><span class="p">:</span> <span class="p">{</span> 
    <span class="nt">&quot;shape&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1000</span><span class="p">,</span> <span class="mi">1000</span><span class="p">],</span>
    <span class="nt">&quot;chunks&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">],</span>
    <span class="nt">&quot;dtype&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;i2&quot;</span><span class="p">,</span>
    <span class="nt">&quot;order&quot;</span><span class="p">:</span> <span class="s2">&quot;C&quot;</span><span class="p">,</span>
    <span class="nt">&quot;compressor&quot;</span><span class="p">:</span> <span class="p">{</span><span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;blosc&quot;</span><span class="p">,</span> <span class="nt">&quot;shuffle&quot;</span><span class="p">:</span> <span class="mi">-1</span><span class="p">,</span> <span class="nt">&quot;clevel&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="nt">&quot;cname&quot;</span><span class="p">:</span> <span class="s2">&quot;lz4&quot;</span><span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="compressors">
<h2>Compressors<a class="headerlink" href="#compressors" title="Permalink to this headline">¶</a></h2>
<p>Chunk data is encoded according to the <code class="docutils literal notranslate"><span class="pre">compressor</span></code> specified in the metadata.</p>
<div class="section" id="compressor-json-schema">
<span id="json-schema-https://github.com/google/tensorstore/json-schema/driver/zarr#compressor"></span><h3>Compressor JSON Schema<a class="headerlink" href="#compressor-json-schema" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">id</span></code> member identifies the compressor.  The remaining
members are specific to the compressor.</p>
<p><code class="docutils literal notranslate"><span class="pre">object</span></code> with members:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 0%" />
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">id</span></code><div class="docutils container">
<strong>Required</strong></div>
</td>
<td><div class="docutils container">
string</div>
<p>Identifies the compressor.</p>
</td>
</tr>
</tbody>
</table>
</div>
<p>The following compressors are supported:</p>
<div class="section" id="zlib-compressor-json-schema">
<span id="json-schema-https://github.com/google/tensorstore/json-schema/driver/zarr#compressor-zlib"></span><h3><code class="docutils literal notranslate"><span class="pre">zlib</span></code> compressor JSON Schema<a class="headerlink" href="#zlib-compressor-json-schema" title="Permalink to this headline">¶</a></h3>
<p>Specifies zlib compression with a zlib or gzip header.</p>
<p><code class="docutils literal notranslate"><span class="pre">object</span></code> with members:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 0%" />
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">id</span></code></td>
<td><div class="docutils container">
<code class="code highlight json docutils literal notranslate"><span class="literal string double"><span class="pre">“zlib”</span></span></code> | <code class="code highlight json docutils literal notranslate"><span class="literal string double"><span class="pre">“gzip”</span></span></code></div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">level</span></code></td>
<td><div class="docutils container">
integer [0, 9] (default is <code class="code highlight json docutils literal notranslate"><span class="literal number integer"><span class="pre">1</span></span></code>)</div>
<span>Specifies the zlib compression level to use.  </span><p>Level 0 indicates no compression (fastest), while level 9 indicates
the best compression ratio (slowest).</p>
</td>
</tr>
</tbody>
</table>
<div class="literal-block-wrapper docutils container" id="id6">
<div class="code-block-caption"><span class="caption-text">Example</span><a class="headerlink" href="#id6" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;gzip&quot;</span><span class="p">,</span> <span class="nt">&quot;level&quot;</span><span class="p">:</span> <span class="mi">9</span><span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="blosc-compressor-json-schema">
<span id="json-schema-https://github.com/google/tensorstore/json-schema/driver/zarr#compressor-blosc"></span><h3><code class="docutils literal notranslate"><span class="pre">blosc</span></code> compressor JSON Schema<a class="headerlink" href="#blosc-compressor-json-schema" title="Permalink to this headline">¶</a></h3>
<p>Specifies <a class="reference external" href="https://github.com/Blosc/c-blosc">Blosc</a> compression.</p>
<p><code class="docutils literal notranslate"><span class="pre">object</span></code> with members:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 0%" />
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">id</span></code></td>
<td><div class="docutils container">
<code class="code highlight json docutils literal notranslate"><span class="literal string double"><span class="pre">“blosc”</span></span></code></div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">cname</span></code></td>
<td><div class="docutils container">
<code class="code highlight json docutils literal notranslate"><span class="literal string double"><span class="pre">“blosclz”</span></span></code> | <code class="code highlight json docutils literal notranslate"><span class="literal string double"><span class="pre">“lz4”</span></span></code> | <code class="code highlight json docutils literal notranslate"><span class="literal string double"><span class="pre">“lz4hc”</span></span></code> | <code class="code highlight json docutils literal notranslate"><span class="literal string double"><span class="pre">“snappy”</span></span></code> | <code class="code highlight json docutils literal notranslate"><span class="literal string double"><span class="pre">“zlib”</span></span></code> | <code class="code highlight json docutils literal notranslate"><span class="literal string double"><span class="pre">“zstd”</span></span></code> (default is <code class="code highlight json docutils literal notranslate"><span class="literal string double"><span class="pre">“lz4”</span></span></code>)</div>
<p>Specifies the compression method used by Blosc.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">clevel</span></code></td>
<td><div class="docutils container">
integer [0, 9] (default is <code class="code highlight json docutils literal notranslate"><span class="literal number integer"><span class="pre">5</span></span></code>)</div>
<span>Specifies the Blosc compression level to use.  </span><p>Higher values are slower but achieve a higher compression ratio.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">shuffle</span></code></td>
<td><div class="docutils container">
<code class="code highlight json docutils literal notranslate"><span class="literal number integer"><span class="pre">-1</span></span></code> | <code class="code highlight json docutils literal notranslate"><span class="literal number integer"><span class="pre">0</span></span></code> | <code class="code highlight json docutils literal notranslate"><span class="literal number integer"><span class="pre">1</span></span></code> | <code class="code highlight json docutils literal notranslate"><span class="literal number integer"><span class="pre">2</span></span></code> (default is <code class="code highlight json docutils literal notranslate"><span class="literal number integer"><span class="pre">-1</span></span></code>)</div>
<div class="docutils container">
One of:</div>
<ul>
<li><div class="docutils container">
<code class="code highlight json docutils literal notranslate"><span class="literal number integer"><span class="pre">-1</span></span></code></div>
<span>Automatic shuffle.  </span><p>Bit-wise shuffle if the element size is 1 byte, otherwise byte-wise
shuffle.</p>
</li>
<li><div class="docutils container">
<code class="code highlight json docutils literal notranslate"><span class="literal number integer"><span class="pre">0</span></span></code></div>
<span>No shuffle  </span></li>
<li><div class="docutils container">
<code class="code highlight json docutils literal notranslate"><span class="literal number integer"><span class="pre">1</span></span></code></div>
<span>Byte-wise shuffle  </span></li>
<li><div class="docutils container">
<code class="code highlight json docutils literal notranslate"><span class="literal number integer"><span class="pre">2</span></span></code></div>
<span>Bit-wise shuffle  </span></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">blocksize</span></code></td>
<td><div class="docutils container">
integer [0, ∞)</div>
<span>Specifies the Blosc blocksize.  </span><p>The default value of 0 causes the block size to be chosen
automatically.</p>
</td>
</tr>
</tbody>
</table>
<div class="literal-block-wrapper docutils container" id="id7">
<div class="code-block-caption"><span class="caption-text">Example</span><a class="headerlink" href="#id7" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;blosc&quot;</span><span class="p">,</span> <span class="nt">&quot;cname&quot;</span><span class="p">:</span> <span class="s2">&quot;blosclz&quot;</span><span class="p">,</span> <span class="nt">&quot;clevel&quot;</span><span class="p">:</span> <span class="mi">9</span><span class="p">,</span> <span class="nt">&quot;shuffle&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="bz2-compressor-json-schema">
<span id="json-schema-https://github.com/google/tensorstore/json-schema/driver/zarr#compressor-bz2"></span><h3><code class="docutils literal notranslate"><span class="pre">bz2</span></code> compressor JSON Schema<a class="headerlink" href="#bz2-compressor-json-schema" title="Permalink to this headline">¶</a></h3>
<p>Specifies <a class="reference external" href="https://sourceware.org/bzip2/">bzip2</a> compression.</p>
<p><code class="docutils literal notranslate"><span class="pre">object</span></code> with members:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 0%" />
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">id</span></code></td>
<td><div class="docutils container">
<code class="code highlight json docutils literal notranslate"><span class="literal string double"><span class="pre">“bz2”</span></span></code></div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">level</span></code></td>
<td><div class="docutils container">
integer [1, 9] (default is <code class="code highlight json docutils literal notranslate"><span class="literal number integer"><span class="pre">1</span></span></code>)</div>
<span>Specifies the bzip2 buffer size/compression level to use.  </span><p>A level of 1 indicates the smallest buffer (fastest), while level 9
indicates the best compression ratio (slowest).</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="limitations">
<h2>Limitations<a class="headerlink" href="#limitations" title="Permalink to this headline">¶</a></h2>
<p>Filters are not supported.</p>
<p>Datetime/timedelta data types are not supported.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../n5/index.html" class="btn btn-neutral float-right" title="n5 Driver" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="../json/index.html" class="btn btn-neutral float-left" title="json Driver" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020 The TensorStore Authors.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>