

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>gcs Key-Value Store driver &mdash; TensorStore  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"displayAlign": "left"})</script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/sphinx_rtd_theme_table_word_wrap_fix.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Python API" href="../../../python/index.html" />
    <link rel="prev" title="file Key-Value Store driver" href="../file/index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> TensorStore
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../installation.html">Building and Installing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../environment.html">Environment variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../index_space.html">Index space</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../context.html">Context framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../spec.html">TensorStore JSON Spec</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../driver/index.html">Drivers</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Key-Value Storage Layer</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#drivers">Drivers</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../memory/index.html"><code class="docutils literal notranslate"><span class="pre">memory</span></code> Key-Value Store driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../file/index.html"><code class="docutils literal notranslate"><span class="pre">file</span></code> Key-Value Store driver</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#"><code class="docutils literal notranslate"><span class="pre">gcs</span></code> Key-Value Store driver</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#gcs-key-value-store-json-schema"><code class="docutils literal notranslate"><span class="pre">gcs</span></code> Key-Value Store JSON Schema</a></li>
<li class="toctree-l4"><a class="reference internal" href="#gcs-user-project-context-resource-json-schema"><code class="docutils literal notranslate"><span class="pre">gcs_user_project</span></code> context resource JSON Schema</a></li>
<li class="toctree-l4"><a class="reference internal" href="#gcs-request-concurrency-context-resource-json-schema"><code class="docutils literal notranslate"><span class="pre">gcs_request_concurrency</span></code> context resource JSON Schema</a></li>
<li class="toctree-l4"><a class="reference internal" href="#gcs-request-retries-context-resource-json-schema"><code class="docutils literal notranslate"><span class="pre">gcs_request_retries</span></code> context resource JSON Schema</a></li>
<li class="toctree-l4"><a class="reference internal" href="#authentication">Authentication</a></li>
<li class="toctree-l4"><a class="reference internal" href="#tls-ca-certificates">TLS CA certificates</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../index.html#key-value-store-json-schema">Key-Value Store JSON Schema</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../python/index.html">Python API</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">TensorStore</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Key-Value Storage Layer</a> &raquo;</li>
        
      <li><code class="docutils literal notranslate"><span class="pre">gcs</span></code> Key-Value Store driver</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/tensorstore/kvstore/gcs/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="gcs-key-value-store-driver">
<span id="gcs-kvstore-driver"></span><h1><code class="docutils literal notranslate"><span class="pre">gcs</span></code> Key-Value Store driver<a class="headerlink" href="#gcs-key-value-store-driver" title="Permalink to this headline">¶</a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">gcs</span></code> driver provides access to Google Cloud Storage.  Keys directly
correspond to paths within a Google Cloud Storage bucket.</p>
<p><a class="reference external" href="https://cloud.google.com/kvstore/docs/generations-preconditions">Conditional writes</a> are used to
safely allow concurrent access from multiple machines.</p>
<div class="section" id="gcs-key-value-store-json-schema">
<span id="json-schema-https://github.com/google/tensorstore/json-schema/key-value-store/driver/gcs"></span><h2><code class="docutils literal notranslate"><span class="pre">gcs</span></code> Key-Value Store JSON Schema<a class="headerlink" href="#gcs-key-value-store-json-schema" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">object</span></code> with members:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 0%" />
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">driver</span></code><div class="docutils container">
<strong>Required</strong></div>
</td>
<td><div class="docutils container">
<code class="code highlight json docutils literal notranslate"><span class="s2"><span class="pre">“gcs”</span></span></code></div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">context</span></code></td>
<td><div class="docutils container">
<span><a class="reference internal" href="../../../context.html#json-schema-https://github.com/google/tensorstore/json-schema/context"><span class="std std-ref">Context</span></a></span></div>
<p>Specifies context resources that augment/override the parent context.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">bucket</span></code><div class="docutils container">
<strong>Required</strong></div>
</td>
<td><div class="docutils container">
string</div>
<span>Google Cloud Storage bucket to use.  </span><p>The Google Cloud account that is used must have appropriate permissions
on the bucket.  If the bucket has <a class="reference external" href="https://cloud.google.com/kvstore/docs/requester-pays">Requestor Pays</a> enabled, either
additional permissions are required or a separate billing project must
be specified using
<a class="reference internal" href="#json-schema-https://github.com/google/tensorstore/json-schema/context/gcs_user_project"><span class="std std-ref">gcs_user_project context resource</span></a>.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">gcs_request_concurrency</span></code></td>
<td><div class="docutils container">
<span><a class="reference internal" href="../../../context.html#json-schema-https://github.com/google/tensorstore/json-schema/context-resource"><span class="std std-ref">Context resource</span></a></span></div>
<p>Specifies or references a previously defined <a class="reference internal" href="#json-schema-https://github.com/google/tensorstore/json-schema/context/gcs_request_concurrency"><span class="std std-ref">gcs_request_concurrency context resource</span></a>.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">gcs_user_project</span></code></td>
<td><div class="docutils container">
<span><a class="reference internal" href="../../../context.html#json-schema-https://github.com/google/tensorstore/json-schema/context-resource"><span class="std std-ref">Context resource</span></a></span></div>
<p>Specifies or references a previously defined <a class="reference internal" href="#json-schema-https://github.com/google/tensorstore/json-schema/context/gcs_user_project"><span class="std std-ref">gcs_user_project context resource</span></a>.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">gcs_request_retries</span></code></td>
<td><div class="docutils container">
<span><a class="reference internal" href="../../../context.html#json-schema-https://github.com/google/tensorstore/json-schema/context-resource"><span class="std std-ref">Context resource</span></a></span></div>
<p>Specifies or references a previously defined <a class="reference internal" href="#json-schema-https://github.com/google/tensorstore/json-schema/context/gcs_request_retries"><span class="std std-ref">gcs_request_retries context resource</span></a>.</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="gcs-user-project-context-resource-json-schema">
<span id="json-schema-https://github.com/google/tensorstore/json-schema/context/gcs_user_project"></span><h2><code class="docutils literal notranslate"><span class="pre">gcs_user_project</span></code> context resource JSON Schema<a class="headerlink" href="#gcs-user-project-context-resource-json-schema" title="Permalink to this headline">¶</a></h2>
<p>Specifies a Google Cloud project to bill for Google Cloud Storage
requests.  If a <code class="docutils literal notranslate"><span class="pre">project_id</span></code> is not specified, requests are
billed to the project that owns the bucket by default.  For <a class="reference external" href="https://cloud.google.com/kvstore/docs/requester-pays">Requestor
Pays</a> buckets,
however, requests without a <code class="docutils literal notranslate"><span class="pre">project_id</span></code> specified will fail
unless the Google Cloud account has additional permissions.</p>
<p><code class="docutils literal notranslate"><span class="pre">object</span></code> with members:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 0%" />
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">project_id</span></code></td>
<td><div class="docutils container">
string</div>
<span>Google Cloud project id, e.g. <code class="code highlight json docutils literal notranslate"><span class="s2"><span class="pre">“my-project”</span></span></code>.  The Google Cloud
account that is used must have appropriate permissions to bill to the
specified project.
  </span></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="gcs-request-concurrency-context-resource-json-schema">
<span id="json-schema-https://github.com/google/tensorstore/json-schema/context/gcs_request_concurrency"></span><h2><code class="docutils literal notranslate"><span class="pre">gcs_request_concurrency</span></code> context resource JSON Schema<a class="headerlink" href="#gcs-request-concurrency-context-resource-json-schema" title="Permalink to this headline">¶</a></h2>
<p>Specifies a limit on the number of concurrent requests to Google Cloud Storage.</p>
<p><code class="docutils literal notranslate"><span class="pre">object</span></code> with members:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 0%" />
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">limit</span></code></td>
<td><div class="docutils container">
integer [1, ∞) | <code class="code highlight json docutils literal notranslate"><span class="s2"><span class="pre">“shared”</span></span></code> (default is <code class="code highlight json docutils literal notranslate"><span class="s2"><span class="pre">“shared”</span></span></code>)</div>
<p>The maximum number of concurrent requests.  If the special value of <code class="code highlight json docutils literal notranslate"><span class="s2"><span class="pre">“shared”</span></span></code> is specified, a shared global limit of 32 applies.</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="gcs-request-retries-context-resource-json-schema">
<span id="json-schema-https://github.com/google/tensorstore/json-schema/context/gcs_request_retries"></span><h2><code class="docutils literal notranslate"><span class="pre">gcs_request_retries</span></code> context resource JSON Schema<a class="headerlink" href="#gcs-request-retries-context-resource-json-schema" title="Permalink to this headline">¶</a></h2>
<p>Specifies retry parameters for handling transient network errors.</p>
<p><code class="docutils literal notranslate"><span class="pre">object</span></code> with members:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 0%" />
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">max_retries</span></code></td>
<td><div class="docutils container">
integer [1, ∞) (default is <code class="code highlight json docutils literal notranslate"><span class="mi"><span class="pre">32</span></span></code>)</div>
<p>Maximum number of attempts in the case of transient errors.</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="authentication">
<span id="gcs-authentication"></span><h2>Authentication<a class="headerlink" href="#authentication" title="Permalink to this headline">¶</a></h2>
<p>To use the <code class="docutils literal notranslate"><span class="pre">gcs</span></code> driver, you must specify service account credentials, which
can be done through one of the following methods:</p>
<ol class="arabic">
<li><p>Set the <span class="target" id="index-0"></span><a class="reference internal" href="../../../environment.html#envvar-GOOGLE_APPLICATION_CREDENTIALS"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">GOOGLE_APPLICATION_CREDENTIALS</span></code></a> environment variable to the
local path to a <a class="reference external" href="https://cloud.google.com/docs/authentication/getting-started">Google Cloud JSON credentials file</a>.</p></li>
<li><p>Set up <a class="reference external" href="https://cloud.google.com/sdk/gcloud/reference/auth/application-default/login">Google Cloud SDK application default credentials</a>.
<a class="reference external" href="https://cloud.google.com/sdk/docs">Install the Google Cloud SDK</a> and run:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>gcloud auth application-default login
</pre></div>
</div>
<p>This stores Google Cloud credentials in
<code class="file docutils literal notranslate"><span class="pre">~/.config/gcloud/application_default_credentials.json</span></code> or
<code class="file docutils literal notranslate"><span class="pre">$CLOUDSDK_CONFIG/application_default_credentials.json</span></code>.</p>
<p>This is often the most convenient method to use on a development machine.</p>
</li>
<li><p>On Google Compute Engine (GCE), the default service account credentials are
retrieved automatically from the metadata service if credentials are not
otherwise specified.</p></li>
</ol>
</div>
<div class="section" id="tls-ca-certificates">
<h2>TLS CA certificates<a class="headerlink" href="#tls-ca-certificates" title="Permalink to this headline">¶</a></h2>
<p>TensorStore connects to the Google Cloud Storage API using HTTP and depends on
the system certificate authority (CA) store to secure connections.  In many
cases it will work by default without any additional configuration, but if you
receive an error like:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>CURL error[77] Problem with the SSL CA cert (path? access rights?):
error setting certificate verify locations:
  CAfile: /etc/ssl/certs/ca-certificates.crt
  CApath: none
</pre></div>
</div>
<p>refer to the <a class="reference internal" href="../../../environment.html#http-environment-variables"><span class="std std-ref">HTTP request-related environment
variables</span></a> section for information on how to specify
the path to the system certificate store at runtime.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../../python/index.html" class="btn btn-neutral float-right" title="Python API" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../file/index.html" class="btn btn-neutral float-left" title="file Key-Value Store driver" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020 The TensorStore Authors

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>