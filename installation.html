<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=icon href=_static/logo.svg><title>Building and Installing - TensorStore</title><link rel=stylesheet href=_static/stylesheets/main.css><link rel=stylesheet href=_static/stylesheets/palette.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>
          :root {
            --md-text-font-family: "Roboto";
            --md-code-font-family: "Roboto Mono";
          }
        </style></head> <body dir=ltr data-md-color-scheme=slate data-md-color-primary=green data-md-color-accent=light-blue> <script>

  /* Prepend the base path to the given key to ensure uniqueness */
  function __prefix(key) {
    var prefix = new URL(".", location)
    return prefix.pathname + "." + key
  }

  /* Fetch the given key from the given storage */
  function __get(key, storage = localStorage) {
    return JSON.parse(storage.getItem(__prefix(key)))
  }
</script> <script>
  var palette = __get("__palette")
  if (palette !== null && typeof palette.color === "object")
    for (var key in palette.color)
      document.body.setAttribute("data-md-color-" + key, palette.color[key])
</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=index.html title=TensorStore class="md-header__button md-logo" aria-label=TensorStore data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 132.0 132.0"><line stroke=currentColor stroke-width=1.5 x1=1.25 y1=2.0 x2=130.8 y2=2.0 /><line stroke=currentColor stroke-width=1.5 x1=1.25 y1=16.2 x2=130.8 y2=16.2 /><line stroke=currentColor stroke-width=1.5 x1=1.25 y1=30.4 x2=130.8 y2=30.4 /><line stroke=currentColor stroke-width=1.5 x1=1.25 y1=44.7 x2=130.8 y2=44.7 /><line stroke=currentColor stroke-width=1.5 x1=1.25 y1=58.9 x2=130.8 y2=58.9 /><line stroke=currentColor stroke-width=1.5 x1=1.25 y1=73.1 x2=130.8 y2=73.1 /><line stroke=currentColor stroke-width=1.5 x1=1.25 y1=87.3 x2=130.8 y2=87.3 /><line stroke=currentColor stroke-width=1.5 x1=1.25 y1=101.6 x2=130.8 y2=101.6 /><line stroke=currentColor stroke-width=1.5 x1=1.25 y1=115.8 x2=130.8 y2=115.8 /><line stroke=currentColor stroke-width=1.5 x1=1.25 y1=130.0 x2=130.8 y2=130.0 /><line stroke=currentColor stroke-width=1.5 y1=2 x1=2.0 y2=130.0 x2=2.0 /><line stroke=currentColor stroke-width=1.5 y1=2 x1=16.2 y2=130.0 x2=16.2 /><line stroke=currentColor stroke-width=1.5 y1=2 x1=30.4 y2=130.0 x2=30.4 /><line stroke=currentColor stroke-width=1.5 y1=2 x1=44.7 y2=130.0 x2=44.7 /><line stroke=currentColor stroke-width=1.5 y1=2 x1=58.9 y2=130.0 x2=58.9 /><line stroke=currentColor stroke-width=1.5 y1=2 x1=73.1 y2=130.0 x2=73.1 /><line stroke=currentColor stroke-width=1.5 y1=2 x1=87.3 y2=130.0 x2=87.3 /><line stroke=currentColor stroke-width=1.5 y1=2 x1=101.6 y2=130.0 x2=101.6 /><line stroke=currentColor stroke-width=1.5 y1=2 x1=115.8 y2=130.0 x2=115.8 /><line stroke=currentColor stroke-width=1.5 y1=2 x1=130.0 y2=130.0 x2=130.0 /><rect fill=currentColor x=3.5 y=3.5 width=11.2 height=11.2 /><rect fill=currentColor x=17.7 y=3.5 width=11.2 height=11.2 /><rect fill=currentColor x=31.9 y=3.5 width=11.2 height=11.2 /><rect fill=currentColor x=46.2 y=3.5 width=11.2 height=11.2 /><rect fill=currentColor x=60.4 y=3.5 width=11.2 height=11.2 /><rect fill=currentColor x=31.9 y=17.7 width=11.2 height=11.2 /><rect fill=currentColor x=31.9 y=31.9 width=11.2 height=11.2 /><rect fill=currentColor x=74.6 y=31.9 width=11.2 height=11.2 /><rect fill=currentColor x=88.8 y=31.9 width=11.2 height=11.2 /><rect fill=currentColor x=103.1 y=31.9 width=11.2 height=11.2 /><rect fill=currentColor x=31.9 y=46.2 width=11.2 height=11.2 /><rect fill=currentColor x=60.4 y=46.2 width=11.2 height=11.2 /><rect fill=currentColor x=117.3 y=46.2 width=11.2 height=11.2 /><rect fill=currentColor x=31.9 y=60.4 width=11.2 height=11.2 /><rect fill=currentColor x=74.6 y=60.4 width=11.2 height=11.2 /><rect fill=currentColor x=31.9 y=74.6 width=11.2 height=11.2 /><rect fill=currentColor x=88.8 y=74.6 width=11.2 height=11.2 /><rect fill=currentColor x=31.9 y=88.8 width=11.2 height=11.2 /><rect fill=currentColor x=103.1 y=88.8 width=11.2 height=11.2 /><rect fill=currentColor x=60.4 y=103.1 width=11.2 height=11.2 /><rect fill=currentColor x=117.3 y=103.1 width=11.2 height=11.2 /><rect fill=currentColor x=74.6 y=117.3 width=11.2 height=11.2 /><rect fill=currentColor x=88.8 y=117.3 width=11.2 height=11.2 /><rect fill=currentColor x=103.1 y=117.3 width=11.2 height=11.2 /></svg> </a> <label class="md-header__button md-icon" for=__drawer> <?xml version="1.0" encoding="UTF-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink version=1.1 id=mdi-menu width=24 height=24 viewbox="0 0 24 24"><path d=M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z /></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> TensorStore </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Building and Installing </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=green data-md-color-accent=light-blue aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_2 hidden> <?xml version="1.0" encoding="UTF-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink version=1.1 id=mdi-lightbulb width=24 height=24 viewbox="0 0 24 24"><path d="M12,2A7,7 0 0,0 5,9C5,11.38 6.19,13.47 8,14.74V17A1,1 0 0,0 9,18H15A1,1 0 0,0 16,17V14.74C17.81,13.47 19,11.38 19,9A7,7 0 0,0 12,2M9,21A1,1 0 0,0 10,22H14A1,1 0 0,0 15,21V20H9V21Z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=green data-md-color-accent=light-blue aria-label="Switch to dark mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <?xml version="1.0" encoding="UTF-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink version=1.1 id=mdi-lightbulb-outline width=24 height=24 viewbox="0 0 24 24"><path d="M12,2A7,7 0 0,1 19,9C19,11.38 17.81,13.47 16,14.74V17A1,1 0 0,1 15,18H9A1,1 0 0,1 8,17V14.74C6.19,13.47 5,11.38 5,9A7,7 0 0,1 12,2M9,21V20H15V21A1,1 0 0,1 14,22H10A1,1 0 0,1 9,21M12,4A5,5 0 0,0 7,9C7,11.05 8.23,12.81 10,13.58V16H14V13.58C15.77,12.81 17,11.05 17,9A5,5 0 0,0 12,4Z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <?xml version="1.0" encoding="UTF-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink version=1.1 id=mdi-magnify width=24 height=24 viewbox="0 0 24 24"><path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <?xml version="1.0" encoding="UTF-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink version=1.1 id=mdi-magnify width=24 height=24 viewbox="0 0 24 24"><path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"/></svg> <?xml version="1.0" encoding="UTF-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink version=1.1 id=mdi-arrow-left width=24 height=24 viewbox="0 0 24 24"><path d=M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z /></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <?xml version="1.0" encoding="UTF-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink version=1.1 id=mdi-close width=24 height=24 viewbox="0 0 24 24"><path d=M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z /></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/google/tensorstore/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> google/tensorstore </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=index.html title=TensorStore class="md-nav__button md-logo" aria-label=TensorStore data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 132.0 132.0"><line stroke=currentColor stroke-width=1.5 x1=1.25 y1=2.0 x2=130.8 y2=2.0 /><line stroke=currentColor stroke-width=1.5 x1=1.25 y1=16.2 x2=130.8 y2=16.2 /><line stroke=currentColor stroke-width=1.5 x1=1.25 y1=30.4 x2=130.8 y2=30.4 /><line stroke=currentColor stroke-width=1.5 x1=1.25 y1=44.7 x2=130.8 y2=44.7 /><line stroke=currentColor stroke-width=1.5 x1=1.25 y1=58.9 x2=130.8 y2=58.9 /><line stroke=currentColor stroke-width=1.5 x1=1.25 y1=73.1 x2=130.8 y2=73.1 /><line stroke=currentColor stroke-width=1.5 x1=1.25 y1=87.3 x2=130.8 y2=87.3 /><line stroke=currentColor stroke-width=1.5 x1=1.25 y1=101.6 x2=130.8 y2=101.6 /><line stroke=currentColor stroke-width=1.5 x1=1.25 y1=115.8 x2=130.8 y2=115.8 /><line stroke=currentColor stroke-width=1.5 x1=1.25 y1=130.0 x2=130.8 y2=130.0 /><line stroke=currentColor stroke-width=1.5 y1=2 x1=2.0 y2=130.0 x2=2.0 /><line stroke=currentColor stroke-width=1.5 y1=2 x1=16.2 y2=130.0 x2=16.2 /><line stroke=currentColor stroke-width=1.5 y1=2 x1=30.4 y2=130.0 x2=30.4 /><line stroke=currentColor stroke-width=1.5 y1=2 x1=44.7 y2=130.0 x2=44.7 /><line stroke=currentColor stroke-width=1.5 y1=2 x1=58.9 y2=130.0 x2=58.9 /><line stroke=currentColor stroke-width=1.5 y1=2 x1=73.1 y2=130.0 x2=73.1 /><line stroke=currentColor stroke-width=1.5 y1=2 x1=87.3 y2=130.0 x2=87.3 /><line stroke=currentColor stroke-width=1.5 y1=2 x1=101.6 y2=130.0 x2=101.6 /><line stroke=currentColor stroke-width=1.5 y1=2 x1=115.8 y2=130.0 x2=115.8 /><line stroke=currentColor stroke-width=1.5 y1=2 x1=130.0 y2=130.0 x2=130.0 /><rect fill=currentColor x=3.5 y=3.5 width=11.2 height=11.2 /><rect fill=currentColor x=17.7 y=3.5 width=11.2 height=11.2 /><rect fill=currentColor x=31.9 y=3.5 width=11.2 height=11.2 /><rect fill=currentColor x=46.2 y=3.5 width=11.2 height=11.2 /><rect fill=currentColor x=60.4 y=3.5 width=11.2 height=11.2 /><rect fill=currentColor x=31.9 y=17.7 width=11.2 height=11.2 /><rect fill=currentColor x=31.9 y=31.9 width=11.2 height=11.2 /><rect fill=currentColor x=74.6 y=31.9 width=11.2 height=11.2 /><rect fill=currentColor x=88.8 y=31.9 width=11.2 height=11.2 /><rect fill=currentColor x=103.1 y=31.9 width=11.2 height=11.2 /><rect fill=currentColor x=31.9 y=46.2 width=11.2 height=11.2 /><rect fill=currentColor x=60.4 y=46.2 width=11.2 height=11.2 /><rect fill=currentColor x=117.3 y=46.2 width=11.2 height=11.2 /><rect fill=currentColor x=31.9 y=60.4 width=11.2 height=11.2 /><rect fill=currentColor x=74.6 y=60.4 width=11.2 height=11.2 /><rect fill=currentColor x=31.9 y=74.6 width=11.2 height=11.2 /><rect fill=currentColor x=88.8 y=74.6 width=11.2 height=11.2 /><rect fill=currentColor x=31.9 y=88.8 width=11.2 height=11.2 /><rect fill=currentColor x=103.1 y=88.8 width=11.2 height=11.2 /><rect fill=currentColor x=60.4 y=103.1 width=11.2 height=11.2 /><rect fill=currentColor x=117.3 y=103.1 width=11.2 height=11.2 /><rect fill=currentColor x=74.6 y=117.3 width=11.2 height=11.2 /><rect fill=currentColor x=88.8 y=117.3 width=11.2 height=11.2 /><rect fill=currentColor x=103.1 y=117.3 width=11.2 height=11.2 /></svg> </a> TensorStore </label> <div class=md-nav__source> <a href=https://github.com/google/tensorstore/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> google/tensorstore </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_1 data-md-state=indeterminate type=checkbox id=__nav_1 checked> <label class=md-nav__link for=__nav_1> <a class href=python/tutorial.html>Python API</a> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Python API" data-md-level=1> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> Python API </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=python/tutorial.html class=md-nav__link> Tutorial </a> </li> <li class=md-nav__item> <a href=python/indexing.html class=md-nav__link> Indexing </a> </li> <li class=md-nav__item> <a href=python/api/index.html class=md-nav__link> API reference </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 type=checkbox id=__nav_2 checked> <label class=md-nav__link for=__nav_2> <a class href>Setup</a> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Setup data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Setup </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Building and Installing <span class="md-nav__icon md-icon"></span> </label> <a href class="md-nav__link md-nav__link--active"> Building and Installing </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Building and Installing </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#python-api class=md-nav__link> Python API </a> <nav class=md-nav aria-label="Python API"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#installation-from-pypi-package class=md-nav__link> Installation from PyPI package </a> </li> <li class=md-nav__item> <a href=#installation-from-local-checkout class=md-nav__link> Installation from local checkout </a> <nav class=md-nav aria-label="Installation from local checkout"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#envvar-TENSORSTORE_BAZELISK class=md-nav__link> <span aria-label="environment variable" class="objinfo-icon objinfo-icon__alias" title="environment variable">$</span><span title="TENSORSTORE_BAZELISK (environment variable)">TENSORSTORE_BAZELISK</span> </a> </li> <li class=md-nav__item> <a href=#envvar-BAZELISK_HOME class=md-nav__link> <span aria-label="environment variable" class="objinfo-icon objinfo-icon__alias" title="environment variable">$</span><span title="BAZELISK_HOME (environment variable)">BAZELISK_HOME</span> </a> </li> <li class=md-nav__item> <a href=#envvar-TENSORSTORE_BAZEL_COMPILATION_MODE class=md-nav__link> <span aria-label="environment variable" class="objinfo-icon objinfo-icon__alias" title="environment variable">$</span><span title="TENSORSTORE_BAZEL_COMPILATION_MODE (environment variable)">TENSORSTORE_BAZEL_COMPILATION_MODE</span> </a> </li> <li class=md-nav__item> <a href=#envvar-TENSORSTORE_BAZEL_STARTUP_OPTIONS class=md-nav__link> <span aria-label="environment variable" class="objinfo-icon objinfo-icon__alias" title="environment variable">$</span><span title="TENSORSTORE_BAZEL_STARTUP_OPTIONS (environment variable)">TENSORSTORE_BAZEL_STARTUP_OPTIONS</span> </a> </li> <li class=md-nav__item> <a href=#envvar-TENSORSTORE_BAZEL_BUILD_OPTIONS class=md-nav__link> <span aria-label="environment variable" class="objinfo-icon objinfo-icon__alias" title="environment variable">$</span><span title="TENSORSTORE_BAZEL_BUILD_OPTIONS (environment variable)">TENSORSTORE_BAZEL_BUILD_OPTIONS</span> </a> </li> <li class=md-nav__item> <a href=#envvar-ARCHFLAGS class=md-nav__link> <span aria-label="environment variable" class="objinfo-icon objinfo-icon__alias" title="environment variable">$</span><span title="ARCHFLAGS (environment variable)">ARCHFLAGS</span> </a> </li> <li class=md-nav__item> <a href=#envvar-MACOSX_DEPLOYMENT_TARGET class=md-nav__link> <span aria-label="environment variable" class="objinfo-icon objinfo-icon__alias" title="environment variable">$</span><span title="MACOSX_DEPLOYMENT_TARGET (environment variable)">MACOSX_DEPLOYMENT_TARGET</span> </a> </li> <li class=md-nav__item> <a href=#envvar-TENSORSTORE_PREBUILT_DIR class=md-nav__link> <span aria-label="environment variable" class="objinfo-icon objinfo-icon__alias" title="environment variable">$</span><span title="TENSORSTORE_PREBUILT_DIR (environment variable)">TENSORSTORE_PREBUILT_DIR</span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#ipython-shell-without-installing class=md-nav__link> IPython shell without installing </a> </li> <li class=md-nav__item> <a href=#publishing-a-pypi-package class=md-nav__link> Publishing a PyPI package </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#c-api class=md-nav__link> C++ API </a> <nav class=md-nav aria-label="C++ API"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#bazel-integration class=md-nav__link> Bazel integration </a> </li> <li class=md-nav__item> <a href=#cmake-integration class=md-nav__link> CMake integration </a> <nav class=md-nav aria-label="CMake integration"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#third-party-dependencies class=md-nav__link> Third-party dependencies </a> </li> <li class=md-nav__item> <a href=#build-caching class=md-nav__link> Build caching </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#development class=md-nav__link> Development </a> <nav class=md-nav aria-label=Development> <ul class=md-nav__list> <li class=md-nav__item> <a href=#building-the-documentation class=md-nav__link> Building the documentation </a> </li> <li class=md-nav__item> <a href=#running-tests class=md-nav__link> Running tests </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#build-dependencies class=md-nav__link> Build dependencies </a> <nav class=md-nav aria-label="Build dependencies"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#bazel-build-dependencies class=md-nav__link> Bazel build </a> <nav class=md-nav aria-label="Bazel build"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#envvar-TENSORSTORE_SYSTEM_LIBS class=md-nav__link> <span aria-label="environment variable" class="objinfo-icon objinfo-icon__alias" title="environment variable">$</span><span title="TENSORSTORE_SYSTEM_LIBS (environment variable)">TENSORSTORE_SYSTEM_LIBS</span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#cmake-build-dependencies class=md-nav__link> CMake build </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=environment.html class=md-nav__link> Environment variables </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 data-md-state=indeterminate type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3> <a class href=spec.html>JSON</a> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=JSON data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> JSON </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=spec.html class=md-nav__link> JSON Spec </a> </li> <li class=md-nav__item> <a href=index_space.html class=md-nav__link> Index space </a> </li> <li class=md-nav__item> <a href=schema.html class=md-nav__link> Schema </a> </li> <li class=md-nav__item> <a href=context.html class=md-nav__link> Context framework </a> </li> <li class=md-nav__item> <a href=driver/index.html class=md-nav__link> Drivers </a> </li> <li class=md-nav__item> <a href=kvstore/index.html class=md-nav__link> Key-Value Storage Layer </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Building and Installing </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#python-api class=md-nav__link> Python API </a> <nav class=md-nav aria-label="Python API"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#installation-from-pypi-package class=md-nav__link> Installation from PyPI package </a> </li> <li class=md-nav__item> <a href=#installation-from-local-checkout class=md-nav__link> Installation from local checkout </a> <nav class=md-nav aria-label="Installation from local checkout"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#envvar-TENSORSTORE_BAZELISK class=md-nav__link> <span aria-label="environment variable" class="objinfo-icon objinfo-icon__alias" title="environment variable">$</span><span title="TENSORSTORE_BAZELISK (environment variable)">TENSORSTORE_BAZELISK</span> </a> </li> <li class=md-nav__item> <a href=#envvar-BAZELISK_HOME class=md-nav__link> <span aria-label="environment variable" class="objinfo-icon objinfo-icon__alias" title="environment variable">$</span><span title="BAZELISK_HOME (environment variable)">BAZELISK_HOME</span> </a> </li> <li class=md-nav__item> <a href=#envvar-TENSORSTORE_BAZEL_COMPILATION_MODE class=md-nav__link> <span aria-label="environment variable" class="objinfo-icon objinfo-icon__alias" title="environment variable">$</span><span title="TENSORSTORE_BAZEL_COMPILATION_MODE (environment variable)">TENSORSTORE_BAZEL_COMPILATION_MODE</span> </a> </li> <li class=md-nav__item> <a href=#envvar-TENSORSTORE_BAZEL_STARTUP_OPTIONS class=md-nav__link> <span aria-label="environment variable" class="objinfo-icon objinfo-icon__alias" title="environment variable">$</span><span title="TENSORSTORE_BAZEL_STARTUP_OPTIONS (environment variable)">TENSORSTORE_BAZEL_STARTUP_OPTIONS</span> </a> </li> <li class=md-nav__item> <a href=#envvar-TENSORSTORE_BAZEL_BUILD_OPTIONS class=md-nav__link> <span aria-label="environment variable" class="objinfo-icon objinfo-icon__alias" title="environment variable">$</span><span title="TENSORSTORE_BAZEL_BUILD_OPTIONS (environment variable)">TENSORSTORE_BAZEL_BUILD_OPTIONS</span> </a> </li> <li class=md-nav__item> <a href=#envvar-ARCHFLAGS class=md-nav__link> <span aria-label="environment variable" class="objinfo-icon objinfo-icon__alias" title="environment variable">$</span><span title="ARCHFLAGS (environment variable)">ARCHFLAGS</span> </a> </li> <li class=md-nav__item> <a href=#envvar-MACOSX_DEPLOYMENT_TARGET class=md-nav__link> <span aria-label="environment variable" class="objinfo-icon objinfo-icon__alias" title="environment variable">$</span><span title="MACOSX_DEPLOYMENT_TARGET (environment variable)">MACOSX_DEPLOYMENT_TARGET</span> </a> </li> <li class=md-nav__item> <a href=#envvar-TENSORSTORE_PREBUILT_DIR class=md-nav__link> <span aria-label="environment variable" class="objinfo-icon objinfo-icon__alias" title="environment variable">$</span><span title="TENSORSTORE_PREBUILT_DIR (environment variable)">TENSORSTORE_PREBUILT_DIR</span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#ipython-shell-without-installing class=md-nav__link> IPython shell without installing </a> </li> <li class=md-nav__item> <a href=#publishing-a-pypi-package class=md-nav__link> Publishing a PyPI package </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#c-api class=md-nav__link> C++ API </a> <nav class=md-nav aria-label="C++ API"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#bazel-integration class=md-nav__link> Bazel integration </a> </li> <li class=md-nav__item> <a href=#cmake-integration class=md-nav__link> CMake integration </a> <nav class=md-nav aria-label="CMake integration"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#third-party-dependencies class=md-nav__link> Third-party dependencies </a> </li> <li class=md-nav__item> <a href=#build-caching class=md-nav__link> Build caching </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#development class=md-nav__link> Development </a> <nav class=md-nav aria-label=Development> <ul class=md-nav__list> <li class=md-nav__item> <a href=#building-the-documentation class=md-nav__link> Building the documentation </a> </li> <li class=md-nav__item> <a href=#running-tests class=md-nav__link> Running tests </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#build-dependencies class=md-nav__link> Build dependencies </a> <nav class=md-nav aria-label="Build dependencies"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#bazel-build-dependencies class=md-nav__link> Bazel build </a> <nav class=md-nav aria-label="Bazel build"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#envvar-TENSORSTORE_SYSTEM_LIBS class=md-nav__link> <span aria-label="environment variable" class="objinfo-icon objinfo-icon__alias" title="environment variable">$</span><span title="TENSORSTORE_SYSTEM_LIBS (environment variable)">TENSORSTORE_SYSTEM_LIBS</span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#cmake-build-dependencies class=md-nav__link> CMake build </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset" role=main> <h1 id=building-and-installing>Building and Installing<a class=headerlink href=#building-and-installing title="Permalink to this headline">¶</a></h1> <p>There are several ways to build and install TensorStore, depending on the intended use case.</p> <h2 id=python-api>Python API<a class=headerlink href=#python-api title="Permalink to this headline">¶</a></h2> <p>The TensorStore <a class="reference internal" href=python/api/index.html#python-api><span class="std std-ref">Python API</span></a> requires Python 3.5 or later (Python 2 is not supported).</p> <h3 id=installation-from-pypi-package>Installation from PyPI package<a class=headerlink href=#installation-from-pypi-package title="Permalink to this headline">¶</a></h3> <p>The Python bindings can be installed directly from the <a href=https://pypi.org/project/tensorstore/ class="reference external">tensorstore PyPI package</a> using <a href=https://pip.pypa.io/en/stable/ class="reference external">pip</a>. It is recommended to first create a <a class="reference external" href=https://packaging.python.org/tutorials/installing-packages/#creating-virtual-environments>virtual environment</a>.</p> <p>To install the latest published version, use:</p> <div class="highlight-shell notranslate"><div class=highlight><pre><span></span><code><span class=c1># Use -vv option to show progress</span>
python3 -m pip install tensorstore -vv
</code></pre></div> </div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>On Windows, you may have to use instead:</p> <div class="highlight-shell notranslate"><div class=highlight><pre><span></span><code>py -3 -m pip install tensorstore -vv
</code></pre></div> </div> </div> <p>This is the simplest and fastest way to install the TensorStore Python bindings if you aren’t intending to make changes to the TensorStore source code.</p> <p>If a pre-built binary package is available for your specific platform and Python version, it will be used and no additional build tools are required. Otherwise, the package will be built from the source distribution and the normal <a class="reference internal" href=#build-dependencies><span class="std std-ref">build dependencies</span></a> are required.</p> <h3 id=installation-from-local-checkout>Installation from local checkout<a class=headerlink href=#installation-from-local-checkout title="Permalink to this headline">¶</a></h3> <p>If you intend to make changes to the TensorStore source code while simultaneously using TensorStore as a dependency, you can create a <a class="reference external" href=https://packaging.python.org/tutorials/installing-packages/#creating-virtual-environments>virtual environment</a> and then install from a local checkout of the git repository:</p> <div class="highlight-shell notranslate"><div class=highlight><pre><span></span><code>git clone https://github.com/google/tensorstore
<span class=nb>cd</span> tensorstore
python3 setup.py develop
</code></pre></div> </div> <p>This invokes <a href=https://bazel.build/ class="reference external">Bazel</a> to build the TensorStore C++ extension module. You must have the required <a class="reference internal" href=#build-dependencies><span class="std std-ref">build dependencies</span></a>.</p> <p>After making changes to the C++ source code, you must re-run:</p> <div class="highlight-shell notranslate"><div class=highlight><pre><span></span><code>python3 setup.py develop
</code></pre></div> </div> <p>to rebuild the extension module. Rebuilds are incremental and will be much faster than the initial build.</p> <p>Note that while it also works to invoke <code class="docutils literal notranslate"><span class=pre>python3</span> <span class=pre>-m</span> <span class=pre>pip</span> <span class=pre>install</span> <span class=pre>-e</span> <span class=pre>.</span></code> or <code class="docutils literal notranslate"><span class=pre>python3</span> <span class=pre>-m</span> <span class=pre>pip</span> <span class=pre>install</span> <span class=pre>.</span></code>, that will result in Bazel being invoked from a temporary copy of the source tree, which prevents incremental rebuilds.</p> <p>The build is affected by the following environment variables:</p> <dl class="std envvar objdesc"> <dt class="sig sig-object std" id=envvar-TENSORSTORE_BAZELISK> <span class="sig-name descname"><span class=pre>TENSORSTORE_BAZELISK</span></span><a class=headerlink href=#envvar-TENSORSTORE_BAZELISK title="Permalink to this definition">¶</a></dt> <dd><p>Path to <a class="reference external" href=https://github.com/bazelbuild/bazelisk>Bazelisk</a> script that is invoked in order to execute the build. By default the bundled <code class="docutils literal notranslate"><span class=pre>bazelisk.py</span></code> is used, but this environment variable allows that to be overridden in order to pass additional options, etc.</p> </dd></dl> <dl class="std envvar objdesc"> <dt class="sig sig-object std" id=envvar-BAZELISK_HOME> <span class="sig-name descname"><span class=pre>BAZELISK_HOME</span></span><a class=headerlink href=#envvar-BAZELISK_HOME title="Permalink to this definition">¶</a></dt> <dd><p>Path to cache directory used by <a class="reference external" href=https://github.com/bazelbuild/bazelisk>Bazelisk</a> for downloaded Bazel versions. Defaults to a platform-specific cache directory.</p> </dd></dl> <dl class="std envvar objdesc"> <dt class="sig sig-object std" id=envvar-TENSORSTORE_BAZEL_COMPILATION_MODE> <span class="sig-name descname"><span class=pre>TENSORSTORE_BAZEL_COMPILATION_MODE</span></span><a class=headerlink href=#envvar-TENSORSTORE_BAZEL_COMPILATION_MODE title="Permalink to this definition">¶</a></dt> <dd><p>Bazel <a class="reference external" href=https://docs.bazel.build/versions/master/user-manual.html#flag--compilation_mode>compilation mode</a> to use. Defaults to <code class="docutils literal notranslate"><span class=pre>opt</span></code> (optimized build).</p> </dd></dl> <dl class="std envvar objdesc"> <dt class="sig sig-object std" id=envvar-TENSORSTORE_BAZEL_STARTUP_OPTIONS> <span class="sig-name descname"><span class=pre>TENSORSTORE_BAZEL_STARTUP_OPTIONS</span></span><a class=headerlink href=#envvar-TENSORSTORE_BAZEL_STARTUP_OPTIONS title="Permalink to this definition">¶</a></dt> <dd><p>Additional <a class="reference external" href=https://docs.bazel.build/versions/master/user-manual.html#startup_options>Bazel startup options</a> to specify when building. Multiple options may be separated by spaces; options containing spaces or other special characters should be encoded according to Posix shell escaping rules as implemented by <a class="reference external" href=https://docs.python.org/3/library/shlex.html#shlex.split title="(in Python v3.9)"><code class="xref py py-func docutils literal notranslate"><span class=pre>shlex.split()</span></code></a>.</p> <p>This may be used to specify a non-standard cache directory:</p> <div class="highlight-shell notranslate"><div class=highlight><pre><span></span><code><span class=nv>TENSORSTORE_BAZEL_STARTUP_OPTIONS</span><span class=o>=</span><span class=s2>&quot;--output_user_root /path/to/bazel_cache&quot;</span>
</code></pre></div> </div> </dd></dl> <dl class="std envvar objdesc"> <dt class="sig sig-object std" id=envvar-TENSORSTORE_BAZEL_BUILD_OPTIONS> <span class="sig-name descname"><span class=pre>TENSORSTORE_BAZEL_BUILD_OPTIONS</span></span><a class=headerlink href=#envvar-TENSORSTORE_BAZEL_BUILD_OPTIONS title="Permalink to this definition">¶</a></dt> <dd><p>Additional <a class="reference external" href=https://docs.bazel.build/versions/master/user-manual.html#semantics-options>Bazel build options</a> to specify when building. The encoding is the same as for <span class=target id=index-0></span><a class="reference internal" href=#envvar-TENSORSTORE_BAZEL_STARTUP_OPTIONS><code class="xref std std-envvar docutils literal notranslate"><span class=pre>TENSORSTORE_BAZEL_STARTUP_OPTIONS</span></code></a>.</p> </dd></dl> <dl class="std envvar objdesc"> <dt class="sig sig-object std" id=envvar-ARCHFLAGS> <span class="sig-name descname"><span class=pre>ARCHFLAGS</span></span><a class=headerlink href=#envvar-ARCHFLAGS title="Permalink to this definition">¶</a></dt> <dd><p>macOS only. Specifies the CPU architecture to target for cross-compilation. May be <code class="docutils literal notranslate"><span class=pre>-arch</span> <span class=pre>x86_64</span></code> or <code class="docutils literal notranslate"><span class=pre>-arch</span> <span class=pre>arm64</span></code>. Universal2 builds (specified by <code class="docutils literal notranslate"><span class=pre>-arch</span> <span class=pre>arm64</span> <span class=pre>-arch</span> <span class=pre>x86_64</span></code> are <em>not</em> supported).</p> </dd></dl> <dl class="std envvar objdesc"> <dt class="sig sig-object std" id=envvar-MACOSX_DEPLOYMENT_TARGET> <span class="sig-name descname"><span class=pre>MACOSX_DEPLOYMENT_TARGET</span></span><a class=headerlink href=#envvar-MACOSX_DEPLOYMENT_TARGET title="Permalink to this definition">¶</a></dt> <dd><p>macOS only. Specifies the minimum required macOS version to target. Must not be earlier than <code class="docutils literal notranslate"><span class=pre>10.14</span></code>. If not specified, defaults to the same macOS version required by the Python binary itself, or <code class="docutils literal notranslate"><span class=pre>10.14</span></code> if later.</p> </dd></dl> <dl class="std envvar objdesc"> <dt class="sig sig-object std" id=envvar-TENSORSTORE_PREBUILT_DIR> <span class="sig-name descname"><span class=pre>TENSORSTORE_PREBUILT_DIR</span></span><a class=headerlink href=#envvar-TENSORSTORE_PREBUILT_DIR title="Permalink to this definition">¶</a></dt> <dd><p>If specified, building is skipped, and instead <code class="docutils literal notranslate"><span class=pre>setup.py</span></code> expects to find the pre-built extension module in the specified directory, from a prior invocation of <code class="docutils literal notranslate"><span class=pre>build_ext</span></code>:</p> <div class="highlight-shell notranslate"><div class=highlight><pre><span></span><code>python3 setup.py build_ext -b /tmp/prebuilt
<span class=nv>TENSORSTORE_PREBUILT_DIR</span><span class=o>=</span>/tmp/prebuilt pip wheel .
</code></pre></div> </div> </dd></dl> <h3 id=ipython-shell-without-installing>IPython shell without installing<a class=headerlink href=#ipython-shell-without-installing title="Permalink to this headline">¶</a></h3> <div class="highlight-shell notranslate"><div class=highlight><pre><span></span><code>python3 bazelisk.py run -c opt //python/tensorstore:shell
</code></pre></div> </div> <h3 id=publishing-a-pypi-package>Publishing a PyPI package<a class=headerlink href=#publishing-a-pypi-package title="Permalink to this headline">¶</a></h3> <p>To build a source package:</p> <div class="highlight-shell notranslate"><div class=highlight><pre><span></span><code>python3 setup.py sdist
</code></pre></div> </div> <p>To build a binary package:</p> <div class="highlight-shell notranslate"><div class=highlight><pre><span></span><code>python3 setup.py bdist_wheel
</code></pre></div> </div> <p>The packages are written to the <code class="docutils literal notranslate"><span class=pre>dist/</span></code> sub-directory.</p> <h2 id=c-api>C++ API<a class=headerlink href=#c-api title="Permalink to this headline">¶</a></h2> <p>The C++ API is supported for both <a href=https://bazel.build/ class="reference external">Bazel</a> and <a href=https://cmake.org/ class="reference external">CMake</a> projects. In either case, it must be added as a dependency so that it is built from source and statically linked as part of the overall build.</p> <h3 id=bazel-integration><span id=bazel-build></span>Bazel integration<a class=headerlink href=#bazel-integration title="Permalink to this headline">¶</a></h3> <p>To add TensorStore as a dependency to an existing Bazel workspace:</p> <div class="highlight-python notranslate"><div class=highlight><pre><span></span><code><span class=n>load</span><span class=p>(</span><span class=s2>&quot;@bazel_tools//tools/build_defs/repo:http.bzl&quot;</span><span class=p>,</span> <span class=s2>&quot;http_archive&quot;</span><span class=p>)</span>
<span class=n>load</span><span class=p>(</span><span class=s2>&quot;@bazel_tools//tools/build_defs/repo:utils.bzl&quot;</span><span class=p>,</span> <span class=s2>&quot;maybe&quot;</span><span class=p>)</span>

<span class=n>maybe</span><span class=p>(</span>
    <span class=n>http_archive</span><span class=p>,</span>
    <span class=n>name</span> <span class=o>=</span> <span class=s2>&quot;com_google_tensorstore&quot;</span><span class=p>,</span>
    <span class=n>strip_prefix</span> <span class=o>=</span> <span class=s2>&quot;tensorstore-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&quot;</span><span class=p>,</span>
    <span class=n>url</span> <span class=o>=</span> <span class=s2>&quot;https://github.com/google/tensorstore/archive/XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX.tar.gz&quot;</span><span class=p>,</span>
    <span class=n>sha256</span> <span class=o>=</span> <span class=s2>&quot;YYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYY&quot;</span><span class=p>,</span>
<span class=p>)</span>
</code></pre></div> </div> <p>Additionally, TensorStore must be built in C++17 mode. You should add the compiler flags specified in the <code class="docutils literal notranslate"><span class=pre>.bazelrc</span></code> file in the TensorStore repository to your dependent project’s <code class="docutils literal notranslate"><span class=pre>.bazelrc</span></code>.</p> <p>The <a class="reference internal" href=#build-dependencies><span class="std std-ref">supported C++ toolchains</span></a> are listed below.</p> <h3 id=cmake-integration><span id=cmake-build></span>CMake integration<a class=headerlink href=#cmake-integration title="Permalink to this headline">¶</a></h3> <p>To add TensorStore as a dependency to an existing CMake project:</p> <div class="highlight-cmake notranslate"><div class=highlight><pre><span></span><code><span class=nb>include</span><span class=p>(</span><span class=s>FetchContent</span><span class=p>)</span>

<span class=nb>FetchContent_Declare</span><span class=p>(</span>
<span class=w>  </span><span class=s>tensorstore</span>
<span class=w>  </span><span class=s>URL</span><span class=w> </span><span class=s2>&quot;https://github.com/google/tensorstore/archive/XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX.tar.gz&quot;</span>
<span class=w>  </span><span class=s>URL_HASH</span><span class=w> </span><span class=s>SHA256=YYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYY</span>
<span class=p>)</span>

<span class=c># Additional FetchContent_Declare calls as needed...</span>

<span class=nb>FetchContent_MakeAvailable</span><span class=p>(</span><span class=s>tensorstore</span><span class=p>)</span>

<span class=c># Define a target that depends on TensorStore...</span>

<span class=nb>target_link_libraries</span><span class=p>(</span>
<span class=w>  </span><span class=s>my_target</span>
<span class=w>  </span><span class=s>PRIVATE</span>
<span class=w>    </span><span class=s>tensorstore::tensorstore</span><span class=w> </span><span class=s>tensorstore::all_drivers</span>
<span class=p>)</span>
</code></pre></div> </div> <p>TensorStore requires that the project is built in C++17 mode.</p> <p>The <a class="reference internal" href=#build-dependencies><span class="std std-ref">supported C++ toolchains</span></a> and <a class="reference internal" href=#cmake-build-dependencies><span class="std std-ref">additional system requirements</span></a> are listed below.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Python is used to generate the CMake build rules automatically from the Bazel build rules as part of the CMake configuration step.</p> </div> <h4 id=third-party-dependencies>Third-party dependencies<a class=headerlink href=#third-party-dependencies title="Permalink to this headline">¶</a></h4> <p>By default, TensorStore’s CMake build also pulls in all of its dependencies via <a class="reference external" href=https://cmake.org/cmake/help/latest/module/FetchContent.html>FetchContent</a> and statically links them. This behavior may be overridden on a per-package basis via <code class="samp docutils literal notranslate"><span class=pre>TENSORSTORE_USE_SYSTEM_</span><em><span class=pre>&lt;PACKAGE&gt;</span></em></code> options, which may be set on the CMake command line with the syntax <code class="samp docutils literal notranslate"><span class=pre>-DTENSORSTORE_USE_SYSTEM_</span><em><span class=pre>&lt;PACKAGE&gt;</span></em><span class=pre>=ON</span></code>.</p> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p>Some combinations of system-provided and vendored dependencies can lead to symbol collisions, which can result in crashes or incorrect behavior at runtime. For example, if you specify <code class="docutils literal notranslate"><span class=pre>-DTENSORSTORE_USE_SYSTEM_CURL=ON</span></code> to use a system-provided CURL, which links with a system-provided ZLIB, then you should also specify <code class="docutils literal notranslate"><span class=pre>-DTENSORSTORE_USE_SYSTEM_ZLIB=ON</span></code> as well to ensure more than one copy of zlib is not linked into the binary.</p> <p>In general it is safest to use either all system-provided dependencies, or all vendored dependencies.</p> </div> <h4 id=build-caching>Build caching<a class=headerlink href=#build-caching title="Permalink to this headline">¶</a></h4> <p>When using CMake, it is often helpful to use a build caching tool like <a class="reference external" href=https://github.com/mozilla/sccache>sccache</a> or to speed up re-builds. To enable sccache, specify <code class="docutils literal notranslate"><span class=pre>-DCMAKE_{C,CXX}_COMPILER_LAUNCHER=ccache</span></code> when invoking CMake.</p> <h2 id=development>Development<a class=headerlink href=#development title="Permalink to this headline">¶</a></h2> <p>For development of TensorStore, ensure that you have the required <a class="reference internal" href=#build-dependencies><span class="std std-ref">build dependencies</span></a>.</p> <h3 id=building-the-documentation>Building the documentation<a class=headerlink href=#building-the-documentation title="Permalink to this headline">¶</a></h3> <div class="highlight-shell notranslate"><div class=highlight><pre><span></span><code>python3 bazelisk.py run //tools/docs:build_docs -- --output /tmp/tensorstore-docs
</code></pre></div> </div> <h3 id=running-tests>Running tests<a class=headerlink href=#running-tests title="Permalink to this headline">¶</a></h3> <div class="highlight-shell notranslate"><div class=highlight><pre><span></span><code>python3 bazelisk.py <span class=nb>test</span> //...
</code></pre></div> </div> <h2 id=build-dependencies><span id=id3></span>Build dependencies<a class=headerlink href=#build-dependencies title="Permalink to this headline">¶</a></h2> <p>TensorStore is written in C++ and is compatible with the following C++ compilers:</p> <ul class=simple> <li><p>GCC 9 or later (Linux)</p></li> <li><p>Clang 8 or later (Linux)</p></li> <li><p>Microsoft Visual Studio 2019 version 16.10 (MSVC 14.29.30037) or later</p></li> <li><p>Clang-cl 9 or later (Windows)</p></li> <li><p>Apple Xcode 11.3.1 or later (earlier versions of XCode 11 have a code generation bug related to stack alignment)</p></li> </ul> <h3 id=bazel-build-dependencies><span id=id4></span>Bazel build<a class=headerlink href=#bazel-build-dependencies title="Permalink to this headline">¶</a></h3> <p>The <a href=https://bazel.build/ class="reference external">Bazel build system</a> is used automatically when building the Python API, and may also be used to <a class="reference internal" href=#bazel-build><span class="std std-ref">build the C++ API</span></a> and command-line tools. You don’t need to install Bazel manually; the included copy of <a class="reference external" href=https://github.com/bazelbuild/bazelisk>bazelisk</a> automatically downloads a suitable version for your operating system. Bazelisk requires Python 2.7 or later to run.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>On macOS, starting with Python 3.6, installing Python using the installer from <a class="reference external" href=python.org>python.org</a> does not automatically set up Python with the SSL/TLS certificates needed by bazelisk.</p> <p>If you have not already done so, you need to run the <code class="file docutils literal notranslate"><span class=pre>/Applications/Python</span> <span class=pre>3.</span><em><span class=pre>x</span></em><span class=pre>/Install</span> <span class=pre>Certificates.command</span></code> script in your Python installation directory. Refer to the documentation at <code class="file docutils literal notranslate"><span class=pre>/Applications/Python</span> <span class=pre>3.</span><em><span class=pre>x</span></em><span class=pre>/ReadMe.rtf</span></code> for more information.</p> </div> <p>TensorStore depends on a number of third-party libraries. By default, these dependencies are fetched and built automatically as part of the TensorStore Bazel build, which requires no additional effort.</p> <p>On Linux and macOS, however, it is possible to override this behavior for a subset of these libraries and instead link to a system-provided version. This reduces the binary size, and if your system packages are kept up to date, ensures TensorStore uses up-to-date versions of these dependencies.</p> <dl class="std envvar objdesc"> <dt class="sig sig-object std" id=envvar-TENSORSTORE_SYSTEM_LIBS> <span class="sig-name descname"><span class=pre>TENSORSTORE_SYSTEM_LIBS</span></span><a class=headerlink href=#envvar-TENSORSTORE_SYSTEM_LIBS title="Permalink to this definition">¶</a></dt> <dd><p>To use system-provided libraries, set the <span class=target id=index-1></span><a class="reference internal" href=#envvar-TENSORSTORE_SYSTEM_LIBS><code class="xref std std-envvar docutils literal notranslate"><span class=pre>TENSORSTORE_SYSTEM_LIBS</span></code></a> environment variable to a comma-separated list of the following identifiers prior to invoking Bazel:</p> </dd></dl> <table class="docutils data align-default" id=id7> <caption><span class=caption-text>Required third-party libraries</span><a class=headerlink href=#id7 title="Permalink to this table">¶</a></caption> <colgroup> <col style="width: 33%"> <col style="width: 33%"> <col style="width: 33%"> </colgroup> <thead> <tr class=row-odd><th class=head><p>Identifier</p></th> <th class=head><p>Bundled library</p></th> <th class=head><p>Version</p></th> </tr> </thead> <tbody> <tr class=row-even><td><p><code class="docutils literal notranslate"><span class=pre>com_google_boringssl</span></code></p></td> <td><p><a href=https://github.com/google/boringssl/ class="reference external">boringssl</a></p></td> <td><p>098695591f3a</p></td> </tr> <tr class=row-odd><td><p><code class="docutils literal notranslate"><span class=pre>com_google_brotli</span></code></p></td> <td><p><a href=https://github.com/google/brotli/ class="reference external">brotli</a></p></td> <td><p>9801a2c5d6c6</p></td> </tr> <tr class=row-even><td><p><code class="docutils literal notranslate"><span class=pre>org_sourceware_bzip2</span></code></p></td> <td><p><a href=https://sourceware.org/pub/bzip2/ class="reference external">bzip2</a></p></td> <td><p>1.0.8</p></td> </tr> <tr class=row-odd><td><p><code class="docutils literal notranslate"><span class=pre>com_github_cares_cares</span></code></p></td> <td><p><a href=https://github.com/c-ares/c-ares/ class="reference external">c-ares</a></p></td> <td><p>6654436a307a</p></td> </tr> <tr class=row-even><td><p><code class="docutils literal notranslate"><span class=pre>org_blosc_cblosc</span></code></p></td> <td><p><a href=https://github.com/Blosc/c-blosc/ class="reference external">c-blosc</a></p></td> <td><p>1.21.1</p></td> </tr> <tr class=row-odd><td><p><code class="docutils literal notranslate"><span class=pre>se_curl</span></code></p></td> <td><p><a class="reference external" href=https://curl.se>curl</a></p></td> <td><p>7.85.0</p></td> </tr> <tr class=row-even><td><p><code class="docutils literal notranslate"><span class=pre>org_aomedia_avif</span></code></p></td> <td><p><a href=https://github.com/AOMediaCodec/libavif/ class="reference external">libavif</a></p></td> <td><p>cd0bb358f83d</p></td> </tr> <tr class=row-odd><td><p><code class="docutils literal notranslate"><span class=pre>jpeg</span></code></p></td> <td><p><a href=https://github.com/libjpeg-turbo/libjpeg-turbo/ class="reference external">libjpeg-turbo</a></p></td> <td><p>2.1.4</p></td> </tr> <tr class=row-even><td><p><code class="docutils literal notranslate"><span class=pre>png</span></code></p></td> <td><p><a href=https://github.com/glennrp/libpng/ class="reference external">libpng</a></p></td> <td><p>1.6.37</p></td> </tr> <tr class=row-odd><td><p><code class="docutils literal notranslate"><span class=pre>libwebp</span></code></p></td> <td><p><a href=https://github.com/webmproject/libwebp/ class="reference external">libwebp</a></p></td> <td><p>1.2.4</p></td> </tr> <tr class=row-even><td><p><code class="docutils literal notranslate"><span class=pre>org_lz4</span></code></p></td> <td><p><a href=https://github.com/lz4/lz4/ class="reference external">lz4</a></p></td> <td><p>1.9.3</p></td> </tr> <tr class=row-odd><td><p><code class="docutils literal notranslate"><span class=pre>nasm</span></code></p></td> <td><p><a class="reference external" href=https://www.nasm.us>nasm</a></p></td> <td><p>2.15.05</p></td> </tr> <tr class=row-even><td><p><code class="docutils literal notranslate"><span class=pre>org_nghttp2</span></code></p></td> <td><p><a href=https://github.com/nghttp2/nghttp2/ class="reference external">nghttp2</a></p></td> <td><p>1.50.0</p></td> </tr> <tr class=row-odd><td><p><code class="docutils literal notranslate"><span class=pre>com_github_nlohmann_json</span></code></p></td> <td><p><a href=https://json.nlohmann.me/ class="reference external">nlohmann/json</a></p></td> <td><p>3.10.5</p></td> </tr> <tr class=row-even><td><p><code class="docutils literal notranslate"><span class=pre>com_github_pybind_pybind11</span></code></p></td> <td><p><a href=https://pybind11.readthedocs.io/en/stable/ class="reference external">pybind11</a></p></td> <td><p>2.10.0</p></td> </tr> <tr class=row-odd><td><p><code class="docutils literal notranslate"><span class=pre>com_google_snappy</span></code></p></td> <td><p><a href=https://github.com/google/snappy/ class="reference external">snappy</a></p></td> <td><p>984b191f0fef</p></td> </tr> <tr class=row-even><td><p><code class="docutils literal notranslate"><span class=pre>libtiff</span></code></p></td> <td><p><a class="reference external" href=https://download.osgeo.org>tiff</a></p></td> <td><p>4.4.0</p></td> </tr> <tr class=row-odd><td><p><code class="docutils literal notranslate"><span class=pre>org_tukaani_xz</span></code></p></td> <td><p><a href=https://tukaani.org/xz/ class="reference external">xz</a></p></td> <td><p>5.3.3alpha</p></td> </tr> <tr class=row-even><td><p><code class="docutils literal notranslate"><span class=pre>net_zlib</span></code></p></td> <td><p><a class="reference external" href=https://zlib.net>zlib</a></p></td> <td><p>1.2.12</p></td> </tr> <tr class=row-odd><td><p><code class="docutils literal notranslate"><span class=pre>net_zstd</span></code></p></td> <td><p><a href=https://github.com/facebook/zstd/ class="reference external">zstd</a></p></td> <td><p>1.5.2</p></td> </tr> </tbody> </table> <p>For example, to run the tests using the system-provided curl, jpeg, and SSL libraries:</p> <div class="highlight-shell notranslate"><div class=highlight><pre><span></span><code><span class=nb>export</span> <span class=nv>TENSORSTORE_SYSTEM_LIBS</span><span class=o>=</span>se_curl,jpeg,com_google_boringssl
python3 bazelisk.py <span class=nb>test</span> //...
</code></pre></div> </div> <h3 id=cmake-build-dependencies><span id=id6></span>CMake build<a class=headerlink href=#cmake-build-dependencies title="Permalink to this headline">¶</a></h3> <p>In addition to a <a class="reference internal" href=#build-dependencies><span class="std std-ref">supported C++ toolchain</span></a>, the following system dependencies are also required for the <a class="reference internal" href=#cmake-build><span class="std std-ref">CMake build</span></a>:</p> <ul class=simple> <li><p>Python 3.7 or later</p></li> <li><p>CMake 3.24 or later</p></li> <li><p><a href=https://www.perl.org/ class="reference external">Perl</a>, for building libaom from source (default). Must be in <code class="docutils literal notranslate"><span class=pre>PATH</span></code>. Not required if <code class="docutils literal notranslate"><span class=pre>-DTENSORSTORE_USE_SYSTEM_LIBAOM=ON</span></code> is specified.</p></li> <li><p><a href=https://nasm.us/ class="reference external">NASM</a>, for building libjpeg-turbo, libaom, and dav1d from source (default). Must be in <code class="docutils literal notranslate"><span class=pre>PATH</span></code>.Not required if <code class="docutils literal notranslate"><span class=pre>-DTENSORSTORE_USE_SYSTEM_{JPEG,LIBAOM,DAV1D}=ON</span></code> is specified.</p></li> <li><p><a href=https://savannah.gnu.org/projects/patch/ class="reference external">GNU Patch</a> or equivalent. Must be in <code class="docutils literal notranslate"><span class=pre>PATH</span></code>.</p></li> </ul> </article> </div> </div> <a href=# class="md-top md-icon" data-md-component=top data-md-state=hidden> <?xml version="1.0" encoding="UTF-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink version=1.1 id=mdi-arrow-up width=24 height=24 viewbox="0 0 24 24"><path d=M13,20H11V8L5.5,13.5L4.08,12.08L12,4.16L19.92,12.08L18.5,13.5L13,8V20Z /></svg> Back to top </a> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=python/api/tensorstore.virtual_chunked.html class="md-footer__link md-footer__link--prev" aria-label="Previous: tensorstore.virtual_chunked" rel=prev> <div class="md-footer__button md-icon"> <?xml version="1.0" encoding="UTF-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink version=1.1 id=mdi-arrow-left width=24 height=24 viewbox="0 0 24 24"><path d=M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z /></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> tensorstore.virtual_chunked </div> </div> </a> <a href=environment.html class="md-footer__link md-footer__link--next" aria-label="Next: Environment variables" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Environment variables </div> </div> <div class="md-footer__button md-icon"> <?xml version="1.0" encoding="UTF-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink version=1.1 id=mdi-arrow-right width=24 height=24 viewbox="0 0 24 24"><path d=M4,11V13H16L10.5,18.5L11.92,19.92L19.84,12L11.92,4.08L10.5,5.5L16,11H4Z /></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": ".", "features": ["navigation.expand", "navigation.sections", "navigation.top"], "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": null}</script> <script src=_static/javascripts/bundle.js></script> <script data-url_root=./ id=documentation_options src=_static/documentation_options.js></script> </body> </html>